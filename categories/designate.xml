<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>graham.hayes.ie (Posts about designate)</title><link>http://graham.hayes.ie/</link><description></description><atom:link href="http://graham.hayes.ie/categories/designate.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><lastBuildDate>Mon, 08 Apr 2019 16:33:31 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>OpenStack Designate - Where we are.</title><link>http://graham.hayes.ie/posts/openstack-designate-where-we-are/</link><dc:creator>Graham Hayes</dc:creator><description>&lt;figure&gt;&lt;img src="http://graham.hayes.ie/images/me.jpg"&gt;&lt;/figure&gt; &lt;div&gt;&lt;p&gt;I have been asked a few times recently "What is the state of the Designate
project?", "How is Designate getting on?", and by people who know what is
happening "What are you going to do about Designate?".&lt;/p&gt;
&lt;p&gt;Needless to say, all of this is depressing to me, and the people that I have
worked with for the last number of years to make Designate a truly useful,
feature rich project.&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;&lt;em&gt;TL;DR;&lt;/em&gt; for this - Designate is not in a sustainable place.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;To start out - Designate has always been a small project. DNS does not have
massive &lt;em&gt;cool&lt;/em&gt; appeal - its not shiny, pretty, or something you see on the
front page of HackerNews (unless it breaks - then oh boy do people become DNS
experts).&lt;/p&gt;
&lt;p&gt;A line a previous PTL for the project used to use, and I have happily robbed is
"DNS is like plumbing, no one cares about it until it breaks, and then you are
standing knee deep in $expletive". (As an aside, that was the reason we chose
the crocodile as our mascot - its basically a dinosaur, old as dirt, and when
it bites it causes some serious complications).&lt;/p&gt;
&lt;p&gt;Unfortunately that comes over into the development of DNS products sometimes.
DNSaaS is a check box on a tender response, an assumption.&lt;/p&gt;
&lt;p&gt;We were lucky in the beginning - we had 2 large(ish) public clouds that needed
DNS services, and nothing currently existed in the eco-system, so we got
funding for a team from a few sources.&lt;/p&gt;
&lt;p&gt;We got a ton done in that period - we moved from a v1 API which was
synchronous to a new v2 async API, we massively increased the amount of DNS
servers we supported, and added new features.&lt;/p&gt;
&lt;p&gt;Unfortunately, this didn't last. Internal priorities within companies
sponsoring the development changed, and we started to shed contributors, which
happens, however disappointing. Usually when this happens if a project is
important enough the community will pick up where the previous group left off.&lt;/p&gt;
&lt;p&gt;We have yet to see many (meaningful) commits from the community though. We
have some great deployers who will file bugs, and if they can put up patch
sets - but they are (incredibly valuable and appreciated) tactical
contributions. A project cannot survive on them, and we are no exception.&lt;/p&gt;
&lt;p&gt;So where does that leave us? Let have a look at how many actual commits we
have had:&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;caption&gt;Commits per cycle&lt;/caption&gt;
&lt;colgroup&gt;
&lt;col width="61%"&gt;
&lt;col width="39%"&gt;
&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;Havana&lt;/td&gt;
&lt;td&gt;172&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Icehouse&lt;/td&gt;
&lt;td&gt;165&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Juno&lt;/td&gt;
&lt;td&gt;254&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Kilo&lt;/td&gt;
&lt;td&gt;340&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Liberty&lt;/td&gt;
&lt;td&gt;327&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Mitaka&lt;/td&gt;
&lt;td&gt;246&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Newton&lt;/td&gt;
&lt;td&gt;299&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Ocata&lt;/td&gt;
&lt;td&gt;98&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Next cycle, we are going to have 2 community goals:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Control Plane API endpoints deployment via WSGI&lt;/li&gt;
&lt;li&gt;Python 3.5 functional testing&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We would have been actually OK for the tempest one - we were one of the first
external repo based plug-ins with &lt;a class="reference external" href="https://github.com/openstack/designate-tempest-plugin"&gt;designate-tempest-plugin&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For WSGI based APIs, this will be a chunk of work - due to our internal code
structure splitting out the API is going to be ... an issue. (and I think it
will be harder than most people expect - anyone using olso.service has
eventlet imported - I am not sure how that affects running in a WSGI server)&lt;/p&gt;
&lt;p&gt;Python 3.5 - I have no idea. We can't even run all our unit tests on python
3.5, so I suspect getting functional testing may be an issue. And, convincing
management that re-factoring parts of the code base due to "community goals"
or a future potential pay-off can be more difficult than it should.&lt;/p&gt;
&lt;img alt="/images/oct-2016-projects-prod.jpg" src="http://graham.hayes.ie/images/oct-2016-projects-prod.jpg"&gt;
&lt;p&gt;We now have a situation where the largest "non-core" project &lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/openstack-designate-where-we-are/#id6" id="id1"&gt;[1]&lt;/a&gt; in the tent
has a tiny number of developers working on it. 42% of deployers are evaluating
Designate, so we should see this start to increase.&lt;/p&gt;
&lt;div class="section" id="how-did-this-happen"&gt;
&lt;h2&gt;How did this happen?&lt;/h2&gt;
&lt;p&gt;Like most situations, there is no single cause.&lt;/p&gt;
&lt;p&gt;Certainly there may have been fault on the side of the Designate leadership.
We had started out as a small team, and had built a huge amount of trust and
respect based on in person interactions over a few years, which meant that
there was a fair bit of "tribal knowledge" in the heads of a few people, and
that new people had a hard time becoming part of the group.&lt;/p&gt;
&lt;p&gt;Also, due to volume of work done by this small group, a lot of users / distros
were OK leaving us work - some of us were also running a production designate
service during this time, so we knew what we needed to develop, and we had
pretty quick feedback when we made a mistake, or caused a bug. All of this
resulted in the major development cost being funded by two companies, which
left us vulnerable to changes in direction from those companies. Then that
shoe dropped. We are now one corporate change of direction from having no
cores on the project being paid to work on the project. &lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/openstack-designate-where-we-are/#id7" id="id2"&gt;[2]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Preceding this, the governance of OpenStack changed to the &lt;a class="reference external" href="https://governance.openstack.org/tc/resolutions/20141202-project-structure-reform-spec.html"&gt;Big Tent&lt;/a&gt;
While this change was a good thing for the OpenStack project as a
whole it had quite a bad impact on us.&lt;/p&gt;
&lt;p&gt;Pre Big Tent, you got integrated. This was at least a cycle, where you moved
docs to docs.openstack.org, integrated with QA testing tooling, got packaged
by Linux distros, and build cross project features.&lt;/p&gt;
&lt;p&gt;When this was a selective thing, there was teams available to help with that,
docs teams would help with content (and tooling - docs was a mass of XML back
then), QA would help with tempest and devstack, horizon would help with panels.&lt;/p&gt;
&lt;p&gt;In Big Tent, there just wasn't resources to do this - the scope of the project
expansion was huge. However the big tent happened (in my opinion - I have
written about this before) before the horizontal / cross project teams were
ready. They stuck to covering the "integrated" projects, which was all
they could do at the time.&lt;/p&gt;
&lt;p&gt;This left us in a position of having to reimplement tooling, figure out
what tooling we did have access to, and migrate everything we had on our
own. And, as a project that (at our peak level of contribution) only ever had
5% of the number of contributors compared to a project like nova,  this put
quite a load on our developers. Things like grenade, tempest and horizon
plug-ins, took weeks to figure out all of which took time from other vital
things like docs, functional tests and getting designate into other tools.&lt;/p&gt;
&lt;p&gt;One of the companies who invested in designate had a QE engineer that used to
contribute, and I can honestly say that the quality of our testing improved 10
fold during the time he worked with us. Not just from in repo tests, but from
standing up full deployment stacks, and trying to break them - we learned a lot
about how we could improve things from his expertise.&lt;/p&gt;
&lt;p&gt;Which is kind of the point I think. Nobody is amazing at everything. You need
people with domain knowledge to work on these areas. If you asked me to do a
multi-node grenade job, I would either start drinking, throw my laptop at you
or do both.&lt;/p&gt;
&lt;p&gt;We still have some of these problems to this day - most of our docs are
in a messy pile in &lt;a class="reference external" href="http://docs.openstack.org/developer/designate"&gt;docs.openstack.org/developer/designate&lt;/a&gt;
while we still have a small amount of old functional tests that are not ported
from our old non plug-in style.&lt;/p&gt;
&lt;p&gt;All of this adds up to make projects like Designate much less attractive
to users - we just need to look at the &lt;a class="reference external" href="https://www.openstack.org/software/releases/newton/components/designate"&gt;project navigator&lt;/a&gt; to see what a bad
image potential users get of us. &lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/openstack-designate-where-we-are/#id8" id="id3"&gt;[3]&lt;/a&gt; This is for a project that was ran as a
full (non beta) service in a public cloud. &lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/openstack-designate-where-we-are/#id9" id="id4"&gt;[4]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="where-too-now-then"&gt;
&lt;h2&gt;Where too now then?&lt;/h2&gt;
&lt;p&gt;Well, this is where I call out to people who actually use the project - don't
jump ship and use something else because of the picture I have painted. We are
a dedicated team, who cares about the project. We just need some help.&lt;/p&gt;
&lt;p&gt;I know there are large telcos who use Designate. I am sure there is tooling,
or docs build up in these companies that could be very useful to the project.&lt;/p&gt;
&lt;p&gt;Nearly every commercial OpenStack distro has Designate. Some have had it since
the beginning. Again, developers, docs, tooling, testers, anything and
everything is welcome. We don't need a massive amount of resources - we are a
small ish, stable, project.&lt;/p&gt;
&lt;p&gt;We need developers with upstream time allocated, and the budget to go to events
like the PTG - for cross project work, and internal designate road map, these
events form the core of how we work.&lt;/p&gt;
&lt;p&gt;We also need help from cross project teams - the work done by them is brilliant
but it can be hard for smaller projects to consume. We have had a lot of
progress since the &lt;a class="reference external" href="http://graham.hayes.ie/posts/openstack-a-leveler-playing-field/"&gt;Leveller Playing Field&lt;/a&gt; debate, but a lot of work is
still optimised for the larger teams who get direct support, or well resourced
teams who can dedicate people to the implementation of plugins / code.&lt;/p&gt;
&lt;p&gt;As someone I was talking to recently said - AWS is not winning public cloud
because of commodity compute (that does help - a lot), but because of the
added services that make using the cloud, well, cloud like. OpenStack needs to
decide that either it is just compute, or if it wants the eco-system. &lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/openstack-designate-where-we-are/#id10" id="id5"&gt;[5]&lt;/a&gt;
Designate is far from alone in this.&lt;/p&gt;
&lt;p&gt;I am happy to talk to anyone about helping to fill in the needed resources -
Designate is a project that started in the very office I am writing this blog
post in, and something I want to last.&lt;/p&gt;
&lt;p&gt;For a visual this is Designate team in Atlanta, just before we got incubated.&lt;/p&gt;
&lt;img alt="/images/ATL.jpg" src="http://graham.hayes.ie/images/ATL.jpg"&gt;
&lt;p&gt;and this was our last mid cycle:&lt;/p&gt;
&lt;img alt="/images/mid-cycle.jpg" src="http://graham.hayes.ie/images/mid-cycle.jpg"&gt;
&lt;p&gt;and in Atlanta at the PTG, there will be two of us.&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="id6" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/openstack-designate-where-we-are/#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;In the &lt;a class="reference external" href="https://www.openstack.org/analytics"&gt;Oct-2016&lt;/a&gt; User Survey Designate was deployed in 23% of clouds&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id7" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/openstack-designate-where-we-are/#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;I have been lucky to have a management chain that is OK with me
spending some time on Designate, and have not asked me to take time off
for Summits or Gatherings, but my day job is working on a completely
different project.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id8" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/openstack-designate-where-we-are/#id3"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;I do have other issues with the metrics - mainly that we existed before
leaving stackforge, and some of the other stats are set so
high, that non "core" projects will probably never meet them.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id9" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/openstack-designate-where-we-are/#id4"&gt;[4]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;I recently went to an internal training talk, where they were talking
about new features in Newton. There was a whole slide about how projects
had improved, or gotten worse on these scores. A whole slide. With
tables of scores, and I think there may have even been a graph.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id10" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/openstack-designate-where-we-are/#id5"&gt;[5]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Now, I am slightly biased, but I would argue that DNS is needed in
commodity compute, but again, that is my view.&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>designate</category><category>openstack</category><category>project update</category><category>tc</category><guid>http://graham.hayes.ie/posts/openstack-designate-where-we-are/</guid><pubDate>Thu, 09 Feb 2017 18:38:00 GMT</pubDate></item><item><title>Non Candidacy for Designate PTL</title><link>http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/</link><dc:creator>Graham Hayes</dc:creator><description>&lt;figure&gt;&lt;img src="https://photos.smugmug.com/Designate-Mid-Cycle/i-2McNPwq/0/S/IMG_3854-S.jpg"&gt;&lt;/figure&gt; &lt;div&gt;&lt;img alt="https://photos.smugmug.com/Designate-Mid-Cycle/i-2McNPwq/0/X3/IMG_3854-X3.jpg" src="https://photos.smugmug.com/Designate-Mid-Cycle/i-2McNPwq/0/X3/IMG_3854-X3.jpg"&gt;
&lt;div class="section" id="non-candidacy-for-designate-ptl-pike"&gt;
&lt;h2&gt;Non Candidacy for Designate PTL - Pike&lt;/h2&gt;
&lt;p&gt;Happy new year!&lt;/p&gt;
&lt;p&gt;As you may have guessed from the title, I have decided that the time has come to step aside as PTL
for the upcoming cycle. It is unfortunate, but my work has pivoted in a different direction over the last
year (containers all the way down man - but hey, I got part of my wish to write Golang, just not on the
project I envisaged :) ).&lt;/p&gt;
&lt;p&gt;As a result, I have been trying to PTL out of hours for the last cycle and a half. Unfortunatly, this has had a
bad impact on this cycle, and I don't think we should repeat the pattern.&lt;/p&gt;
&lt;p&gt;We have done some great work over the last year or so - Worker Model, the &lt;code class="python"&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Domain&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Zone&lt;/span&gt;&lt;/code&gt; work,
the new dashboard, being one of the first projects to have an external tempest plugin and getting lost in
the west of Ireland in the aftermath of the flooding.&lt;/p&gt;
&lt;img alt="https://photos.smugmug.com/Designate-Mid-Cycle/i-h4gGtxX/0/X3/IMG_3869-X3.jpg" src="https://photos.smugmug.com/Designate-Mid-Cycle/i-h4gGtxX/0/X3/IMG_3869-X3.jpg"&gt;
&lt;p&gt;I can honestly say, I have enjoyed my entire time with this team, from our first meeting in Austin, back in
the beginning of 2014, the whole way through to today. We have always been a small team, but when I think back
to what we have produced over the last few years, I am incredibly proud.&lt;/p&gt;
&lt;p&gt;Change is healthy, and I have been in a leadership position in Designate longer than most, and no project should
rely on a person or persons to continue to exist.&lt;/p&gt;
&lt;p&gt;I will stick around on IRC, and still remain a member of the core review team, as a lot of the roadmap is still in
the heads of myself and 2 or 3 others, but my main aim will be to document the roadmap in a single place, and not
just in thousands of etherpads.&lt;/p&gt;
&lt;p&gt;It has been a fun journey - I have gotten to work with some great people, see some amazing places, work on really
interestig problems and contribute to a project that was close to my heart.&lt;/p&gt;
&lt;p&gt;This is not an easy thing to do, but I think the time is right for the project and me to let someone else make
their stamp on the project, and bring it to the next level.&lt;/p&gt;
&lt;p&gt;Nominations close soon &lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/#id4" id="id1"&gt;[0]&lt;/a&gt; so please start thinking about if you would like to run or not. If anyone has any questions
about the role, please drop me an email &lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/#id5" id="id2"&gt;[1]&lt;/a&gt; or ping me &lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/#id6" id="id3"&gt;[2]&lt;/a&gt; on &lt;a class="reference external" href="irc://chat.freenode.net/#openstack-dns"&gt;IRC&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Thank you for this opportunity to serve the community for so long, it is not something I will forget.&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="id4" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/#id1"&gt;[0]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a class="reference external" href="https://governance.openstack.org/election/"&gt;Election Schedule&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id5" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;graham.hayes (a) hpe.com&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id6" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/#id3"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;mugsie&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>designate</category><category>openstack</category><guid>http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/</guid><pubDate>Mon, 09 Jan 2017 22:16:50 GMT</pubDate></item><item><title>Big Rename - Complete!!</title><link>http://graham.hayes.ie/posts/big-rename-complete/</link><dc:creator>Graham Hayes</dc:creator><description>&lt;div&gt;&lt;img alt="http://replygif.net/i/789.gif" src="http://replygif.net/i/789.gif"&gt;
&lt;div class="section" id="it-is-done"&gt;
&lt;h2&gt;It is done !! :)&lt;/h2&gt;
&lt;p&gt;So, yesterday Tim and Kiall +2'd the change.&lt;/p&gt;
&lt;p&gt;It was quite a bit bigger than expected (+4444, -4230) so thanks to all the
reviewers who put time and effort into checking everything worked, and I hadn't
made any glaring mistakes :).&lt;/p&gt;
&lt;p&gt;For anyone interested (or mad) the change is here: &lt;a class="reference external" href="https://review.openstack.org/#/c/244315/"&gt;Review&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>code</category><category>designate</category><category>openstack</category><category>refactor</category><guid>http://graham.hayes.ie/posts/big-rename-complete/</guid><pubDate>Thu, 19 Nov 2015 12:49:35 GMT</pubDate></item><item><title>The Big Rename - why?</title><link>http://graham.hayes.ie/posts/the-big-rename/</link><dc:creator>Graham Hayes</dc:creator><description>&lt;div&gt;&lt;div class="section" id="update"&gt;
&lt;h2&gt;Update&lt;/h2&gt;
&lt;p&gt;Due to unforeseen circumstances I will not be able to continue work on this until
Monday, so we will have to extend the freeze until Tuesday the 17th.&lt;/p&gt;
&lt;p&gt;The following message will be put on the patches affected by the freeze.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://graham.hayes.ie/listings/big-rename-2-update-message.txt.html"&gt;big-rename-2-update-message.txt&lt;/a&gt;  &lt;a class="reference external" href="http://graham.hayes.ie/listings/big-rename-2-update-message.txt"&gt;(Source)&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code text"&gt;&lt;a name="rest_code_55952025f4d2471cb27ebce6790c6d3e-1"&gt;&lt;/a&gt;Due to unforeseen circumstances I will not be able to continue work on this until
&lt;a name="rest_code_55952025f4d2471cb27ebce6790c6d3e-2"&gt;&lt;/a&gt;Monday, so we will have to extend the freeze until Tuesday the 17th.
&lt;a name="rest_code_55952025f4d2471cb27ebce6790c6d3e-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_55952025f4d2471cb27ebce6790c6d3e-4"&gt;&lt;/a&gt;On Tuesday 2015-11-17 this -2 will be removed, and code review as normal will continue.
&lt;a name="rest_code_55952025f4d2471cb27ebce6790c6d3e-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_55952025f4d2471cb27ebce6790c6d3e-6"&gt;&lt;/a&gt;I apologise for the delay, and will get this completed ASAP.
&lt;a name="rest_code_55952025f4d2471cb27ebce6790c6d3e-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_55952025f4d2471cb27ebce6790c6d3e-8"&gt;&lt;/a&gt;Further updates will be posted to http://graham.hayes.ie/posts/the-big-rename/
&lt;/pre&gt;&lt;img alt="https://upload.wikimedia.org/wikipedia/commons/1/1a/Code.jpg" src="https://upload.wikimedia.org/wikipedia/commons/1/1a/Code.jpg"&gt;
&lt;p&gt;&lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/the-big-rename/#id2" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-big-rename"&gt;
&lt;h2&gt;The Big Rename&lt;/h2&gt;
&lt;p&gt;So from tomorrow (2015-11-10) until Friday (2015-11-13) Designate will be frozen for new code.&lt;/p&gt;
&lt;p&gt;I send an email to the openstack-dev list before the summit &lt;a class="reference external" href="http://lists.openstack.org/pipermail/openstack-dev/2015-October/077442.html"&gt;[2]&lt;/a&gt; so, it shouldn't be a surprise (I hope)&lt;/p&gt;
&lt;p&gt;So, why are we doing this?&lt;/p&gt;
&lt;p&gt;When Designate started it had a v1 API, which used the term domains for DNS Domains. This was pre Keystone's Domain support, but unfortunately they also decided to use it. AS Designate was not even incubated at the time, there was not much we could do, but continue on.&lt;/p&gt;
&lt;p&gt;When we started the v2 API, we decided to avoid confusion and expose "Domains" as "Zones".&lt;/p&gt;
&lt;p&gt;This worked for a while, but as we worked on the V2 API, we had to write code to translate the internal code (which referenced Domains) to Zones. this caused code like:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://graham.hayes.ie/listings/big-rename-render.py.html"&gt;big-rename-render.py&lt;/a&gt;  &lt;a class="reference external" href="http://graham.hayes.ie/listings/big-rename-render.py"&gt;(Source)&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;_render_object&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-2"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# The dict we will return to be rendered to JSON / output format&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-3"&gt;&lt;/a&gt;    &lt;span class="n"&gt;r_obj&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-4"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Loop over all fields that are supposed to be output&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-5"&gt;&lt;/a&gt;    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MODIFICATIONS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'fields'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-6"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Get properties for this field&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-7"&gt;&lt;/a&gt;        &lt;span class="n"&gt;field_props&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MODIFICATIONS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'fields'&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-8"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Check if it has to be renamed&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-9"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;field_props&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'rename'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-10"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;getattr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;field_props&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'rename'&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-11"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# if rename is specified we need to change the key&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-12"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj_key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;field_props&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'rename'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-13"&gt;&lt;/a&gt;        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-14"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# if not, move on&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-15"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;getattr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_fc67dbcb17d448f1af2ac98f37d8777f-16"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj_key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;and&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://graham.hayes.ie/listings/big-rename-error-render.py.html"&gt;big-rename-error-render.py&lt;/a&gt;  &lt;a class="reference external" href="http://graham.hayes.ie/listings/big-rename-error-render.py"&gt;(Source)&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-1"&gt;&lt;/a&gt;&lt;span class="nd"&gt;@classmethod&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;_rename_path_segment&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj_adapter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-4"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Check if the object is a list - lists will just have an index as a&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-5"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# value, ands this can't be renamed&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-6"&gt;&lt;/a&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;issubclass&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obj_adapter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ADAPTER_OBJECT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ListObjectMixin&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-7"&gt;&lt;/a&gt;        &lt;span class="n"&gt;obj_adapter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_object_adapter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-8"&gt;&lt;/a&gt;            &lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ADAPTER_FORMAT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-9"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj_adapter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ADAPTER_OBJECT&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LIST_ITEM_TYPE&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;obj_name&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-10"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Return the segment as is, and the next adapter (which is the&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-11"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# LIST_ITEM_TYPE)&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-12"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj_adapter&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-13"&gt;&lt;/a&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-14"&gt;&lt;/a&gt;    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;obj_adapter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MODIFICATIONS&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-15"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'fields'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{})&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-16"&gt;&lt;/a&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-17"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Check if this field as actually a nested object&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-18"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FIELDS&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{})&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'relation'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-19"&gt;&lt;/a&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-20"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj_cls&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FIELDS&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'relation_cls'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-21"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj_adapter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_object_adapter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-22"&gt;&lt;/a&gt;                &lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ADAPTER_FORMAT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-23"&gt;&lt;/a&gt;                &lt;span class="n"&gt;obj_cls&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-24"&gt;&lt;/a&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-25"&gt;&lt;/a&gt;            &lt;span class="nb"&gt;object&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DesignateObject&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;obj_cls_from_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obj_cls&lt;/span&gt;&lt;span class="p"&gt;)()&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-26"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# Recurse down into this object&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-27"&gt;&lt;/a&gt;            &lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj_adapter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_rename_path_segment&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-28"&gt;&lt;/a&gt;                &lt;span class="n"&gt;obj_adapter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-29"&gt;&lt;/a&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-30"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# No need to continue the loop&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-31"&gt;&lt;/a&gt;            &lt;span class="k"&gt;break&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-32"&gt;&lt;/a&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-33"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="nb"&gt;isinstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-34"&gt;&lt;/a&gt;            &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-35"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'rename'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NotSpecifiedSential&lt;/span&gt;&lt;span class="p"&gt;()),&lt;/span&gt; &lt;span class="n"&gt;NotSpecifiedSential&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;\
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-36"&gt;&lt;/a&gt;                &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;path_segment&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'rename'&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-37"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# Just do the rename&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-38"&gt;&lt;/a&gt;            &lt;span class="n"&gt;path_segment&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-39"&gt;&lt;/a&gt;
&lt;a name="rest_code_68d0462acfcd4733a3bb3b9dae25abac-40"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj_adapter&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;which proved to be quite fragile. (Yes that last bit of code is trying to walk the error path of a JSONSchema Error and rename the path to the new terminology)&lt;/p&gt;
&lt;p&gt;We are also logging messages about domains - which could prove to be quite confusing when we remove the v1 API and users are only interacting with zones.&lt;/p&gt;
&lt;p&gt;So tomorrow morning-ish (UTC) we will start to rename every occurrence of "domain" in the code base to "zone" (without breaking Keystone domain support).&lt;/p&gt;
&lt;p&gt;Anything that does not have the "the-big-rename" topic on Gerrit will be getting a procedural -2 from me or the designate-core team.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://graham.hayes.ie/listings/big-rename-2-message.txt.html"&gt;big-rename-2-message.txt&lt;/a&gt;  &lt;a class="reference external" href="http://graham.hayes.ie/listings/big-rename-2-message.txt"&gt;(Source)&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code text"&gt;&lt;a name="rest_code_a1c40c77a22049559170dfa1c13f3458-1"&gt;&lt;/a&gt;Currently Designate is undergoing a code freeze to allow us re-factor the code base,
&lt;a name="rest_code_a1c40c77a22049559170dfa1c13f3458-2"&gt;&lt;/a&gt;as announced here: - http://lists.openstack.org/pipermail/openstack-dev/2015-October/077442.html
&lt;a name="rest_code_a1c40c77a22049559170dfa1c13f3458-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_a1c40c77a22049559170dfa1c13f3458-4"&gt;&lt;/a&gt;All code that is not in the "the-big-rename" topic will be getting this procedural -2.
&lt;a name="rest_code_a1c40c77a22049559170dfa1c13f3458-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_a1c40c77a22049559170dfa1c13f3458-6"&gt;&lt;/a&gt;More information can be found here: - http://graham.hayes.ie/posts/the-big-rename/
&lt;a name="rest_code_a1c40c77a22049559170dfa1c13f3458-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_a1c40c77a22049559170dfa1c13f3458-8"&gt;&lt;/a&gt;On Friday 2015-11-13 this -2 will be removed, and code review as normal will continue.
&lt;a name="rest_code_a1c40c77a22049559170dfa1c13f3458-9"&gt;&lt;/a&gt;
&lt;a name="rest_code_a1c40c77a22049559170dfa1c13f3458-10"&gt;&lt;/a&gt;This re-factor will break the majority of patches that are outstanding, and you may need to manually
&lt;a name="rest_code_a1c40c77a22049559170dfa1c13f3458-11"&gt;&lt;/a&gt;rebase your patch when we remove the -2.
&lt;/pre&gt;&lt;table class="docutils footnote" frame="void" id="id2" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/the-big-rename/#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;By Crusher95 (Own work) [CC BY-SA 4.0 (&lt;a class="reference external" href="http://creativecommons.org/licenses/by-sa/4.0"&gt;http://creativecommons.org/licenses/by-sa/4.0&lt;/a&gt;)], via Wikimedia Commons&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>code</category><category>designate</category><category>openstack</category><category>refactor</category><guid>http://graham.hayes.ie/posts/the-big-rename/</guid><pubDate>Mon, 09 Nov 2015 19:52:03 GMT</pubDate></item></channel></rss>