<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>graham.hayes.ie (designate)</title><link>http://graham.hayes.ie/</link><description></description><atom:link type="application/rss+xml" href="http://graham.hayes.ie/categories/designate.xml" rel="self"></atom:link><language>en</language><lastBuildDate>Mon, 09 Jan 2017 22:30:44 GMT</lastBuildDate><generator>https://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Non Candidacy for Designate PTL</title><link>http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/</link><dc:creator>Graham Hayes</dc:creator><description>&lt;div&gt;&lt;img alt="https://photos.smugmug.com/Designate-Mid-Cycle/i-2McNPwq/0/X3/IMG_3854-X3.jpg" src="https://photos.smugmug.com/Designate-Mid-Cycle/i-2McNPwq/0/X3/IMG_3854-X3.jpg"&gt;
&lt;div class="section" id="non-candidacy-for-designate-ptl-pike"&gt;
&lt;h2&gt;Non Candidacy for Designate PTL - Pike&lt;/h2&gt;
&lt;p&gt;Happy new year!&lt;/p&gt;
&lt;p&gt;As you may have guessed from the title, I have decided that the time has come to step aside as PTL
for the upcoming cycle. It is unfortunate, but my work has pivoted in a different direction over the last
year (containers all the way down man - but hey, I got part of my wish to write Golang, just not on the
project I envisaged :) ).&lt;/p&gt;
&lt;p&gt;As a result, I have been trying to PTL out of hours for the last cycle and a half. Unfortunatly, this has had a
bad impact on this cycle, and I don't think we should repeat the pattern.&lt;/p&gt;
&lt;p&gt;We have done some great work over the last year or so - Worker Model, the &lt;code class="python"&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Domain&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Zone&lt;/span&gt;&lt;/code&gt; work,
the new dashboard, being one of the first projects to have an external tempest plugin and getting lost in
the west of Ireland in the aftermath of the flooding.&lt;/p&gt;
&lt;img alt="https://photos.smugmug.com/Designate-Mid-Cycle/i-h4gGtxX/0/X3/IMG_3869-X3.jpg" src="https://photos.smugmug.com/Designate-Mid-Cycle/i-h4gGtxX/0/X3/IMG_3869-X3.jpg"&gt;
&lt;p&gt;I can honestly say, I have enjoyed my entire time with this team, from our first meeting in Austin, back in
the beginning of 2014, the whole way through to today. We have always been a small team, but when I think back
to what we have produced over the last few years, I am incredibly proud.&lt;/p&gt;
&lt;p&gt;Change is healthy, and I have been in a leadership position in Designate longer than most, and no project should
rely on a person or persons to continue to exist.&lt;/p&gt;
&lt;p&gt;I will stick around on IRC, and still remain a member of the core review team, as a lot of the roadmap is still in
the heads of myself and 2 or 3 others, but my main aim will be to document the roadmap in a single place, and not
just in thousands of etherpads.&lt;/p&gt;
&lt;p&gt;It has been a fun journey - I have gotten to work with some great people, see some amazing places, work on really
interestig problems and contribute to a project that was close to my heart.&lt;/p&gt;
&lt;p&gt;This is not an easy thing to do, but I think the time is right for the project and me to let someone else make
their stamp on the project, and bring it to the next level.&lt;/p&gt;
&lt;p&gt;Nominations close soon &lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/#id4" id="id1"&gt;[0]&lt;/a&gt; so please start thinking about if you would like to run or not. If anyone has any questions
about the role, please drop me an email &lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/#id5" id="id2"&gt;[1]&lt;/a&gt; or ping me &lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/#id6" id="id3"&gt;[2]&lt;/a&gt; on &lt;a class="reference external" href="irc://chat.freenode.net/#openstack-dns"&gt;IRC&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Thank you for this opportunity to serve the community for so long, it is not something I will forget.&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="id4" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/#id1"&gt;[0]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a class="reference external" href="https://governance.openstack.org/election/"&gt;Election Schedule&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id5" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;graham.hayes (a) hpe.com&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id6" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/#id3"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;mugsie&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>designate</category><category>openstack</category><guid>http://graham.hayes.ie/posts/non-candidacy-for-designate-ptl/</guid><pubDate>Mon, 09 Jan 2017 22:16:50 GMT</pubDate></item><item><title>Big Rename - Complete!!</title><link>http://graham.hayes.ie/posts/big-rename-complete/</link><dc:creator>Graham Hayes</dc:creator><description>&lt;div&gt;&lt;img alt="http://replygif.net/i/789.gif" src="http://replygif.net/i/789.gif"&gt;
&lt;div class="section" id="it-is-done"&gt;
&lt;h2&gt;It is done !! :)&lt;/h2&gt;
&lt;p&gt;So, yesterday Tim and Kiall +2'd the change.&lt;/p&gt;
&lt;p&gt;It was quite a bit bigger than expected (+4444, -4230) so thanks to all the
reviewers who put time and effort into checking everything worked, and I hadn't
made any glaring mistakes :).&lt;/p&gt;
&lt;p&gt;For anyone interested (or mad) the change is here: &lt;a class="reference external" href="https://review.openstack.org/#/c/244315/"&gt;Review&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>code</category><category>designate</category><category>openstack</category><category>refactor</category><guid>http://graham.hayes.ie/posts/big-rename-complete/</guid><pubDate>Thu, 19 Nov 2015 12:49:35 GMT</pubDate></item><item><title>The Big Rename - why?</title><link>http://graham.hayes.ie/posts/the-big-rename/</link><dc:creator>Graham Hayes</dc:creator><description>&lt;div&gt;&lt;div class="section" id="update"&gt;
&lt;h2&gt;Update&lt;/h2&gt;
&lt;p&gt;Due to unforeseen circumstances I will not be able to continue work on this until
Monday, so we will have to extend the freeze until Tuesday the 17th.&lt;/p&gt;
&lt;p&gt;The following message will be put on the patches affected by the freeze.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://graham.hayes.ie/listings/big-rename-2-update-message.txt.html"&gt;big-rename-2-update-message.txt&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code text"&gt;&lt;a name="rest_code_8d39297264874f7eb757824345e9258a-1"&gt;&lt;/a&gt;Due to unforeseen circumstances I will not be able to continue work on this until
&lt;a name="rest_code_8d39297264874f7eb757824345e9258a-2"&gt;&lt;/a&gt;Monday, so we will have to extend the freeze until Tuesday the 17th.
&lt;a name="rest_code_8d39297264874f7eb757824345e9258a-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_8d39297264874f7eb757824345e9258a-4"&gt;&lt;/a&gt;On Tuesday 2015-11-17 this -2 will be removed, and code review as normal will continue.
&lt;a name="rest_code_8d39297264874f7eb757824345e9258a-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_8d39297264874f7eb757824345e9258a-6"&gt;&lt;/a&gt;I apologise for the delay, and will get this completed ASAP.
&lt;a name="rest_code_8d39297264874f7eb757824345e9258a-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_8d39297264874f7eb757824345e9258a-8"&gt;&lt;/a&gt;Further updates will be posted to http://graham.hayes.ie/posts/the-big-rename/
&lt;/pre&gt;&lt;img alt="https://upload.wikimedia.org/wikipedia/commons/1/1a/Code.jpg" src="https://upload.wikimedia.org/wikipedia/commons/1/1a/Code.jpg"&gt;
&lt;p&gt;&lt;a class="footnote-reference" href="http://graham.hayes.ie/posts/the-big-rename/#id2" id="id1"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-big-rename"&gt;
&lt;h2&gt;The Big Rename&lt;/h2&gt;
&lt;p&gt;So from tomorrow (2015-11-10) until Friday (2015-11-13) Designate will be frozen for new code.&lt;/p&gt;
&lt;p&gt;I send an email to the openstack-dev list before the summit &lt;a class="reference external" href="http://lists.openstack.org/pipermail/openstack-dev/2015-October/077442.html"&gt;[2]&lt;/a&gt; so, it shouldn't be a surprise (I hope)&lt;/p&gt;
&lt;p&gt;So, why are we doing this?&lt;/p&gt;
&lt;p&gt;When Designate started it had a v1 API, which used the term domains for DNS Domains. This was pre Keystone's Domain support, but unfortunately they also decided to use it. AS Designate was not even incubated at the time, there was not much we could do, but continue on.&lt;/p&gt;
&lt;p&gt;When we started the v2 API, we decided to avoid confusion and expose "Domains" as "Zones".&lt;/p&gt;
&lt;p&gt;This worked for a while, but as we worked on the V2 API, we had to write code to translate the internal code (which referenced Domains) to Zones. this caused code like:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://graham.hayes.ie/listings/big-rename-render.py.html"&gt;big-rename-render.py&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;_render_object&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cls&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-2"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# The dict we will return to be rendered to JSON / output format&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-3"&gt;&lt;/a&gt;    &lt;span class="n"&gt;r_obj&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-4"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Loop over all fields that are supposed to be output&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-5"&gt;&lt;/a&gt;    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MODIFICATIONS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'fields'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-6"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Get properties for this field&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-7"&gt;&lt;/a&gt;        &lt;span class="n"&gt;field_props&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MODIFICATIONS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'fields'&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-8"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Check if it has to be renamed&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-9"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;field_props&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'rename'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-10"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;getattr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;field_props&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'rename'&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-11"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# if rename is specified we need to change the key&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-12"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj_key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;field_props&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'rename'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-13"&gt;&lt;/a&gt;        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-14"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# if not, move on&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-15"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;getattr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_40033da273ce4d76aaefc4ec2bf58d21-16"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj_key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;and&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://graham.hayes.ie/listings/big-rename-error-render.py.html"&gt;big-rename-error-render.py&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-1"&gt;&lt;/a&gt;&lt;span class="nd"&gt;@classmethod&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;_rename_path_segment&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cls&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj_adapter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-4"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# Check if the object is a list - lists will just have an index as a&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-5"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# value, ands this can't be renamed&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-6"&gt;&lt;/a&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;issubclass&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obj_adapter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ADAPTER_OBJECT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ListObjectMixin&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-7"&gt;&lt;/a&gt;        &lt;span class="n"&gt;obj_adapter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_object_adapter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-8"&gt;&lt;/a&gt;            &lt;span class="n"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ADAPTER_FORMAT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-9"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj_adapter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ADAPTER_OBJECT&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LIST_ITEM_TYPE&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;obj_name&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-10"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Return the segment as is, and the next adapter (which is the&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-11"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# LIST_ITEM_TYPE)&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-12"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj_adapter&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-13"&gt;&lt;/a&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-14"&gt;&lt;/a&gt;    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;obj_adapter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MODIFICATIONS&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-15"&gt;&lt;/a&gt;            &lt;span class="s1"&gt;'fields'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{})&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-16"&gt;&lt;/a&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-17"&gt;&lt;/a&gt;        &lt;span class="c1"&gt;# Check if this field as actually a nested object&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-18"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FIELDS&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{})&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'relation'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-19"&gt;&lt;/a&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-20"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj_cls&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FIELDS&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'relation_cls'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-21"&gt;&lt;/a&gt;            &lt;span class="n"&gt;obj_adapter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_object_adapter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-22"&gt;&lt;/a&gt;                &lt;span class="n"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ADAPTER_FORMAT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-23"&gt;&lt;/a&gt;                &lt;span class="n"&gt;obj_cls&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-24"&gt;&lt;/a&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-25"&gt;&lt;/a&gt;            &lt;span class="nb"&gt;object&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DesignateObject&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;obj_cls_from_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obj_cls&lt;/span&gt;&lt;span class="p"&gt;)()&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-26"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# Recurse down into this object&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-27"&gt;&lt;/a&gt;            &lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj_adapter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cls&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_rename_path_segment&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-28"&gt;&lt;/a&gt;                &lt;span class="n"&gt;obj_adapter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-29"&gt;&lt;/a&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-30"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# No need to continue the loop&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-31"&gt;&lt;/a&gt;            &lt;span class="k"&gt;break&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-32"&gt;&lt;/a&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-33"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="nb"&gt;isinstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-34"&gt;&lt;/a&gt;            &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-35"&gt;&lt;/a&gt;                &lt;span class="s1"&gt;'rename'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NotSpecifiedSential&lt;/span&gt;&lt;span class="p"&gt;()),&lt;/span&gt; &lt;span class="n"&gt;NotSpecifiedSential&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;\
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-36"&gt;&lt;/a&gt;                &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;path_segment&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'rename'&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-37"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;# Just do the rename&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-38"&gt;&lt;/a&gt;            &lt;span class="n"&gt;path_segment&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-39"&gt;&lt;/a&gt;
&lt;a name="rest_code_31780d0532d64313b54ac78be85a003a-40"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;path_segment&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj_adapter&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;which proved to be quite fragile. (Yes that last bit of code is trying to walk the error path of a JSONSchema Error and rename the path to the new terminology)&lt;/p&gt;
&lt;p&gt;We are also logging messages about domains - which could prove to be quite confusing when we remove the v1 API and users are only interacting with zones.&lt;/p&gt;
&lt;p&gt;So tomorrow morning-ish (UTC) we will start to rename every occurrence of "domain" in the code base to "zone" (without breaking Keystone domain support).&lt;/p&gt;
&lt;p&gt;Anything that does not have the "the-big-rename" topic on Gerrit will be getting a procedural -2 from me or the designate-core team.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://graham.hayes.ie/listings/big-rename-2-message.txt.html"&gt;big-rename-2-message.txt&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code text"&gt;&lt;a name="rest_code_9b70ed641b064f8595d93e2db321aa1b-1"&gt;&lt;/a&gt;Currently Designate is undergoing a code freeze to allow us re-factor the code base,
&lt;a name="rest_code_9b70ed641b064f8595d93e2db321aa1b-2"&gt;&lt;/a&gt;as announced here: - http://lists.openstack.org/pipermail/openstack-dev/2015-October/077442.html
&lt;a name="rest_code_9b70ed641b064f8595d93e2db321aa1b-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_9b70ed641b064f8595d93e2db321aa1b-4"&gt;&lt;/a&gt;All code that is not in the "the-big-rename" topic will be getting this procedural -2.
&lt;a name="rest_code_9b70ed641b064f8595d93e2db321aa1b-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_9b70ed641b064f8595d93e2db321aa1b-6"&gt;&lt;/a&gt;More information can be found here: - http://graham.hayes.ie/posts/the-big-rename/
&lt;a name="rest_code_9b70ed641b064f8595d93e2db321aa1b-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_9b70ed641b064f8595d93e2db321aa1b-8"&gt;&lt;/a&gt;On Friday 2015-11-13 this -2 will be removed, and code review as normal will continue.
&lt;a name="rest_code_9b70ed641b064f8595d93e2db321aa1b-9"&gt;&lt;/a&gt;
&lt;a name="rest_code_9b70ed641b064f8595d93e2db321aa1b-10"&gt;&lt;/a&gt;This re-factor will break the majority of patches that are outstanding, and you may need to manually
&lt;a name="rest_code_9b70ed641b064f8595d93e2db321aa1b-11"&gt;&lt;/a&gt;rebase your patch when we remove the -2.
&lt;/pre&gt;&lt;table class="docutils footnote" frame="void" id="id2" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="http://graham.hayes.ie/posts/the-big-rename/#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;By Crusher95 (Own work) [CC BY-SA 4.0 (&lt;a class="reference external" href="http://creativecommons.org/licenses/by-sa/4.0"&gt;http://creativecommons.org/licenses/by-sa/4.0&lt;/a&gt;)], via Wikimedia Commons&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>code</category><category>designate</category><category>openstack</category><category>refactor</category><guid>http://graham.hayes.ie/posts/the-big-rename/</guid><pubDate>Mon, 09 Nov 2015 19:52:03 GMT</pubDate></item></channel></rss>