<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>graham.hayes.ie (Posts about bugs)</title><link>http://graham.hayes.ie/</link><description></description><atom:link href="http://graham.hayes.ie/categories/bugs.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><lastBuildDate>Mon, 07 Nov 2022 17:53:50 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>MiniDNS, TCP, and the internet</title><link>http://graham.hayes.ie/posts/minidns-tcp-and-the-internet/</link><dc:creator>Graham Hayes</dc:creator><description>&lt;section id="minidns-tcp-eventlet-and-the-internet"&gt;
&lt;h2&gt;MiniDNS, TCP, Eventlet and the internet&lt;/h2&gt;
&lt;p&gt;We had &lt;a class="reference external" href="https://bugs.launchpad.net/designate/+bug/1552864"&gt;this bug&lt;/a&gt; come
in yesterday.&lt;/p&gt;
&lt;p&gt;It was a bit unexpected - as we tested it pretty extensively when it was being
developed.&lt;/p&gt;
&lt;p&gt;The line in question was this:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code python"&gt;&lt;a id="rest_code_fed3fc0a8fe9419fa36af25323eaf34c-1" name="rest_code_fed3fc0a8fe9419fa36af25323eaf34c-1" href="http://graham.hayes.ie/posts/minidns-tcp-and-the-internet/#rest_code_fed3fc0a8fe9419fa36af25323eaf34c-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;client&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp_response&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In eventlet 0.17.x this behaved like the standard
&lt;code class="python"&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sendall&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/code&gt; , instead of &lt;code class="python"&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;(It was &lt;a class="reference external" href="https://github.com/eventlet/eventlet/commit/c315ee86dac996ac533b738f7c8777f4d01a0472"&gt;this commit&lt;/a&gt; as it turns out - it was noted in the release notes &lt;a class="reference external" href="http://eventlet.net/doc/changelog.html#id5"&gt;here&lt;/a&gt; but we missed it)&lt;/p&gt;
&lt;p&gt;The other major problem is that the bug did not manifest itself until we pushed
the AXFR over a long range connection.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://graham.hayes.ie/posts/minidns-tcp-and-the-internet/"&gt;Read moreâ€¦&lt;/a&gt; (2 min remaining to read)&lt;/p&gt;&lt;/section&gt;</description><category>bugs</category><category>eventlet</category><category>networking</category><category>openstack</category><guid>http://graham.hayes.ie/posts/minidns-tcp-and-the-internet/</guid><pubDate>Fri, 04 Mar 2016 20:50:00 GMT</pubDate></item></channel></rss>