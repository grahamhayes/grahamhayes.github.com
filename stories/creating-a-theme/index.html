<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Creating A Theme | graham.hayes.ie</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="http://graham.hayes.ie/stories/creating-a-theme/">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="Graham Hayes">
<meta property="og:site_name" content="graham.hayes.ie">
<meta property="og:title" content="Creating A Theme">
<meta property="og:url" content="http://graham.hayes.ie/stories/creating-a-theme/">
<meta property="og:description" content="Nikola is a static site and blog generator. So is Jekyll. While I like what we have done with Nikola,
I do admit that Jekyll (and others!) have many more, and nicer themes than Nikola does.
This docum">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-05-28T18:46:48Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@grahamhayes">
<meta name="twitter:creator" content="@grahamhayes">
<meta name="author" content="Graham Hayes">
<meta property="og:site_name" content="graham.hayes.ie">
<meta property="og:title" content="Creating A Theme">
<meta property="og:url" content="http://graham.hayes.ie/stories/creating-a-theme/">
<meta property="og:description" content="Nikola is a static site and blog generator. So is Jekyll. While I like what we have done with Nikola,
I do admit that Jekyll (and others!) have many more, and nicer themes than Nikola does.
This docum">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-05-28T18:46:48Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@grahamhayes">
<meta name="twitter:creator" content="@grahamhayes">
</head>
<body>
    <section class="social"><ul>
<li><a href="../../" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../../archive" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../../categories" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://twitter.com/grahamhayes" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/grahamhayes" title="My Github"><i class="icon-github"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
<article class="storypage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name">Creating A Theme</h1>

        
    </header><div itemprop="articleBody text">
    <div>
<p>Nikola is a static site and blog generator. So is Jekyll. While I like what we have done with Nikola,
I do admit that Jekyll (and others!) have many more, and nicer themes than Nikola does.</p>
<p>This document is an attempt at making it easier for 3rd parties (that means <em>you</em> people! ;-) to
create themes. Since I <strong>suck</strong> at designing websites, I asked for opinions on themes to port,
and got some feedback. Since this is <strong>Not So Hard™</strong>, I will try to make time to port a few
and see what happens.</p>
<p>Today’s theme is <a class="reference external" href="https://github.com/poole/lanyon">Lanyon</a> which is written by <a class="reference external" href="https://twitter.com/mdo">@mdo</a>
and released under a MIT license, which is liberal enough.</p>
<p>So, let’s get started.</p>
<div class="section" id="checking-it-out">
<h2>Checking It Out</h2>
<p>The first step in porting a theme is making the original theme work. Lanyon is awesome in that its
<a class="reference external" href="https://github.com/poole/lanyon">GitHub project</a> is a full site!</p>
<p>So:</p>
<pre class="literal-block">
# Get jekyll
sudo apt-get install jekyll

# Get Lanyon
git clone git@github.com:poole/lanyon.git

# Build it
cd lanyon &amp;&amp; jekyll build

# Look at it
jekyll serve &amp; google-chrome http://localhost:4000
</pre>
<p>If you <strong>do not want to install Jekyll</strong>, you can also see it in action at <a class="reference external" href="http://lanyon.getpoole.com/">http://lanyon.getpoole.com/</a></p>
<p>Some things jump to my mind:</p>
<ol class="arabic simple">
<li>This is one fine looking theme</li>
<li>Very clear and readable</li>
<li>Nice hidden navigation-thingy</li>
</ol>
<p>Also, from looking at <a class="reference external" href="https://github.com/poole/lanyon/blob/master/README.md">the project’s README</a>
it supports some nice configuration options:</p>
<ol class="arabic simple">
<li>Color schemes</li>
<li>Reverse layout</li>
<li>Sidebar overlay instead of push</li>
<li>Open the sidebar by default, or on a per-page basis by using its metadata</li>
</ol>
<p>Let’s try to make all those nice things survive the porting.</p>
</div>
<div class="section" id="starting-from-somewhere">
<h2>Starting From Somewhere</h2>
<p>Nikola has a nice, clean, base theme from which you can start when writing your own theme.
Why start from that instead of from a clean slate? Because theme inheritance is going to save you a ton of work,
that’s why. If you start from scratch you won’t be able to build <strong>anything</strong> until you have a bunch of
templates written. Starting from base, you just need to hack on the things you <strong>need</strong> to change.</p>
<p>First, we create a site with some content in it. We’ll use the <tt class="docutils literal">nikola init</tt> wizard (with the <tt class="docutils literal"><span class="pre">--demo</span></tt> option) for that:</p>
<pre class="literal-block">
$ nikola init --demo lanyon-port
Creating Nikola Site
====================

This is Nikola v7.4.1.  We will now ask you a few easy questions about your new site.
If you do not want to answer and want to go with the defaults instead, simply restart with the `-q` parameter.
--- Questions about the site ---
Site title [My Nikola Site]:
Site author [Nikola Tesla]:
Site author's e-mail [n.tesla@example.com]:
Site description [This is a demo site for Nikola.]:
Site URL [https://example.com/]:
--- Questions about languages and locales ---
We will now ask you to provide the list of languages you want to use.
Please list all the desired languages, comma-separated, using ISO 639-1 codes.  The first language will be used as the default.
Type '?' (a question mark, sans quotes) to list available languages.
Language(s) to use [en]:

Please choose the correct time zone for your blog. Nikola uses the tz database.
You can find your time zone here:
http://en.wikipedia.org/wiki/List_of_tz_database_time_zones

Time zone [UTC]:
    Current time in UTC: 16:02:07
Use this time zone? [Y/n]
--- Questions about comments ---
You can configure comments now.  Type '?' (a question mark, sans quotes) to list available comment systems.  If you do not want any comments, just leave the field blank.
Comment system:

That's it, Nikola is now configured.  Make sure to edit conf.py to your liking.
If you are looking for themes and addons, check out https://themes.getnikola.com/ and https://plugins.getnikola.com/.
Have fun!
[2015-05-28T16:02:08Z] INFO: init: A new site with example data has been created at lanyon-port.
[2015-05-28T16:02:08Z] INFO: init: See README.txt in that folder for more information.
</pre>
<p>Then, we create an empty theme inheriting from base. This theme will use Mako templates. If you prefer Jinja2,
then you should use <tt class="docutils literal"><span class="pre">base-jinja</span></tt> instead:</p>
<pre class="literal-block">
$ cd lanyon-port/
$ mkdir themes
$ mkdir themes/lanyon
$ echo base &gt; themes/lanyon/parent
</pre>
<p>Edit <tt class="docutils literal">conf.py</tt> and set <tt class="docutils literal">THEME = 'lanyon'</tt>. Also set <tt class="docutils literal">USE_BUNDLES = False</tt> (just do it for now, we’ll get to bundles later).</p>
<p>You can now build that site using <tt class="docutils literal">nikola build</tt> and it will look like this:</p>
<div class="figure">
<a class="reference external image-reference" href="https://getnikola.com/images/lanyon-0.png"><img alt="https://getnikola.com/images/lanyon-0.thumbnail.png" src="https://getnikola.com/images/lanyon-0.thumbnail.png"></a>
<p class="caption">This is just the base theme.</p>
</div>
</div>
<div class="section" id="basic-css">
<h2>Basic CSS</h2>
<p>The next step is to know exactly how Lanyon’s pages work. To do this, we read its HTML.
First let’s look at the head element:</p>
<pre class="code html"><a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-1"></a><span class="cp">&lt;!DOCTYPE html&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-2"></a><span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">"http://www.w3.org/1999/xhtml"</span> <span class="na">xml:lang=</span><span class="s">"en"</span> <span class="na">lang=</span><span class="s">"en-us"</span><span class="nt">&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-3"></a>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-4"></a><span class="nt">&lt;head&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-5"></a><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://gmpg.org/xfn/11"</span> <span class="na">rel=</span><span class="s">"profile"</span><span class="nt">&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-6"></a><span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"content-type"</span> <span class="na">content=</span><span class="s">"text/html; charset=utf-8"</span><span class="nt">&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-7"></a>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-8"></a><span class="c">&lt;!-- Enable responsiveness on mobile devices--&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-9"></a><span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0, maximum-scale=1"</span><span class="nt">&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-10"></a>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-11"></a><span class="nt">&lt;title&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-12"></a>    Lanyon <span class="ni">&amp;middot;</span> A Jekyll theme
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-13"></a><span class="nt">&lt;/title&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-14"></a>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-15"></a><span class="c">&lt;!-- CSS --&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-16"></a><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"/public/css/poole.css"</span><span class="nt">&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-17"></a><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"/public/css/syntax.css"</span><span class="nt">&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-18"></a><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"/public/css/lanyon.css"</span><span class="nt">&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-19"></a><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400"</span><span class="nt">&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-20"></a>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-21"></a><span class="c">&lt;!-- Icons --&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-22"></a><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"apple-touch-icon-precomposed"</span> <span class="na">sizes=</span><span class="s">"144x144"</span> <span class="na">href=</span><span class="s">"/public/apple-touch-icon-144-precomposed.thumbnail.png"</span><span class="nt">&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-23"></a><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"shortcut icon"</span> <span class="na">href=</span><span class="s">"/public/favicon.ico"</span><span class="nt">&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-24"></a>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-25"></a><span class="c">&lt;!-- RSS --&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-26"></a><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"alternate"</span> <span class="na">type=</span><span class="s">"application/rss+xml"</span> <span class="na">title=</span><span class="s">"RSS"</span> <span class="na">href=</span><span class="s">"/atom.xml"</span><span class="nt">&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-27"></a>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-28"></a><span class="c">&lt;!-- Google Analytics --&gt;</span>
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-29"></a>[...]
<a name="rest_code_0cbe4cc2b36d4e1893b79a8e22e6adfc-30"></a><span class="nt">&lt;/head&gt;</span>
</pre>
<p>The interesting part there is that it loads a few CSS files. If you check the source of your Nikola site, you will
see something fairly similar:</p>
<pre class="code html"><a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-1"></a><span class="cp">&lt;!DOCTYPE html&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-2"></a><span class="nt">&lt;html</span> <span class="na">prefix=</span><span class="s">"og: http://ogp.me/ns# article: http://ogp.me/ns/article# "</span> <span class="na">vocab=</span><span class="s">"http://ogp.me/ns"</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-3"></a><span class="nt">&lt;head&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-4"></a><span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-5"></a><span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"description"</span> <span class="na">content=</span><span class="s">"This is a demo site for Nikola."</span><span class="nt">&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-6"></a><span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width"</span><span class="nt">&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-7"></a><span class="nt">&lt;title&gt;</span>My Nikola Site | My Nikola Site<span class="nt">&lt;/title&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-8"></a>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-9"></a><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"assets/css/rst.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-10"></a><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"assets/css/code.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-11"></a><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"assets/css/theme.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-12"></a>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-13"></a><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"alternate"</span> <span class="na">type=</span><span class="s">"application/rss+xml"</span> <span class="na">title=</span><span class="s">"RSS"</span> <span class="na">href=</span><span class="s">"rss.xml"</span><span class="nt">&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-14"></a><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"canonical"</span> <span class="na">href=</span><span class="s">"https://example.com/index.html"</span><span class="nt">&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-15"></a><span class="c">&lt;!--[if lt IE 9]&gt;&lt;script src="assets/js/html5.js"&gt;&lt;/script&gt;&lt;![endif]--&gt;</span><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"prefetch"</span> <span class="na">href=</span><span class="s">"posts/welcome-to-nikola.html"</span> <span class="na">type=</span><span class="s">"text/html"</span><span class="nt">&gt;</span>
<a name="rest_code_7ba7e094fbdb4a539146e8c42a616d60-16"></a><span class="nt">&lt;/head&gt;</span>
</pre>
<p>Luckily, since this is all under a very liberal license, we can just copy these CSS files into
Nikola, adapting the paths a little so that they follow our conventions:</p>
<pre class="literal-block">
$ mkdir -p themes/lanyon/assets/css
$ cp ../lanyon/public/css/poole.css themes/lanyon/assets/css/
$ cp ../lanyon/public/css/lanyon.css themes/lanyon/assets/css/
</pre>
<p>Notice I am <em>not</em> copying <tt class="docutils literal">syntax.css</tt>? That’s because Nikola handles that styles for syntax highlighting
in a particular way, using a setting called <tt class="docutils literal">CODE_COLOR_SCHEME</tt> where you can configure
what color scheme the syntax highlighter uses. You can use your own <tt class="docutils literal">assets/css/code.css</tt> if you
don’t like the provided ones.</p>
<p>Nikola <strong>requires</strong> <tt class="docutils literal">assets/css/rst.css</tt> and <tt class="docutils literal">assets/css/code.css</tt> to function properly.
We will also add themes for IPython Notebook (<tt class="docutils literal">assets/css/ipython.min.css</tt>
and <tt class="docutils literal">assets/css/nikola_ipython.css</tt>) into the template; note that they are
activated only if you configured your <tt class="docutils literal">POSTS</tt>/<tt class="docutils literal">PAGES</tt> with ipynb support.</p>
<p>But how do I tell <strong>our</strong> lanyon theme to use those CSS files instead of whatever it’s using now?
By giving our theme its own base_helper.tmpl.</p>
<p>That file is a <strong>template</strong> used to generate parts of the pages. It’s large and
complicated but we don’t need to change a lot of it. First, get it from
<a class="reference external" href="https://github.com/getnikola/nikola/blob/master/nikola/data/themes/base/templates/base_helper.tmpl">Nikola’s source code</a> and put a copy in <tt class="docutils literal">themes/lanyon/templates/base_helper.tmpl</tt>:</p>
<pre class="literal-block">
$ mkdir themes/lanyon/templates
$ curl https://raw.githubusercontent.com/getnikola/nikola/master/nikola/data/themes/base/templates/base_helper.tmpl &gt; themes/lanyon/templates/base_helper.tmpl
</pre>
<p>The part we want to change is this:</p>
<pre class="code html+mako"><a name="rest_code_413ec752f4424d068221edcbd74fd46f-1"></a><span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_stylesheets()"</span><span class="cp">&gt;</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-2"></a>    <span class="cp">%</span><span class="k">if</span> <span class="n">use_bundles</span><span class="p">:</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-3"></a>        <span class="cp">%</span><span class="k">if</span> <span class="n">use_cdn</span><span class="p">:</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-4"></a>            <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/all.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-5"></a>        <span class="cp">%</span><span class="k">else</span><span class="p">:</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-6"></a>            <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/all-nocdn.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-7"></a>        <span class="cp">%</span><span class="k">endif</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-8"></a>    <span class="cp">%</span><span class="k">else</span><span class="p">:</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-9"></a>        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/rst.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-10"></a>        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/code.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-11"></a>        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/theme.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-12"></a>        <span class="cp">%</span><span class="k">if</span> <span class="n">has_custom_css</span><span class="p">:</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-13"></a>            <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/custom.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-14"></a>        <span class="cp">%</span><span class="k">endif</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-15"></a>    <span class="cp">%</span><span class="k">endif</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-16"></a>    <span class="cp">%</span> <span class="k">if</span> <span class="n">needs_ipython_css</span><span class="p">:</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-17"></a>        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/ipython.min.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-18"></a>        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/nikola_ipython.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-19"></a>    <span class="cp">%</span><span class="k"> endif</span>
<a name="rest_code_413ec752f4424d068221edcbd74fd46f-20"></a><span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span>
</pre>
<p>And we will change it so it uses the lanyon styles instead of theme.css (again, ignore the bundles for now!):</p>
<pre class="code html+mako"><a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-1"></a><span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_stylesheets()"</span><span class="cp">&gt;</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-2"></a>    <span class="cp">%</span><span class="k">if</span> <span class="n">use_bundles</span><span class="p">:</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-3"></a>        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/all.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-4"></a>    <span class="cp">%</span><span class="k">else</span><span class="p">:</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-5"></a>        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/rst.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-6"></a>        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/poole.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-7"></a>        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/lanyon.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-8"></a>        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/code.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-9"></a>        <span class="cp">%</span><span class="k">if</span> <span class="n">has_custom_css</span><span class="p">:</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-10"></a>            <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/custom.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-11"></a>        <span class="cp">%</span><span class="k">endif</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-12"></a>    <span class="cp">%</span><span class="k">endif</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-13"></a>    <span class="cp">%</span> <span class="k">if</span> <span class="n">needs_ipython_css</span><span class="p">:</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-14"></a>        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/ipython.min.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-15"></a>        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/css/nikola_ipython.css"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-16"></a>    <span class="cp">%</span><span class="k"> endif</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-17"></a>    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400"</span><span class="nt">&gt;</span>
<a name="rest_code_f3c53a90bc5640c58e784d0e97117ce4-18"></a><span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span>
</pre>
<div class="figure">
<a class="reference external image-reference" href="https://getnikola.com/images/lanyon-1.png"><img alt="https://getnikola.com/images/lanyon-1.thumbnail.png" src="https://getnikola.com/images/lanyon-1.thumbnail.png"></a>
<p class="caption">You may say this looks like crap. Don’t worry, we are just starting :-)</p>
</div>
</div>
<div class="section" id="page-layout">
<h2>Page Layout</h2>
<p>This is trickier but should be no problem for people with a basic understanding of HTML and a desire to make a theme!</p>
<p>Lanyon’s content is split in two parts: a sidebar and the rest. The sidebar looks like this (shortened for comprehension):</p>
<pre class="code html"><a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-1"></a><span class="nt">&lt;body&gt;</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-2"></a><span class="c">&lt;!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-3"></a><span class="c">     styles, `#sidebar-checkbox` for behavior. --&gt;</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-4"></a><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">class=</span><span class="s">"sidebar-checkbox"</span> <span class="na">id=</span><span class="s">"sidebar-checkbox"</span><span class="nt">&gt;</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-5"></a>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-6"></a><span class="c">&lt;!-- Toggleable sidebar --&gt;</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-7"></a><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sidebar"</span> <span class="na">id=</span><span class="s">"sidebar"</span><span class="nt">&gt;</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-8"></a>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sidebar-item"</span><span class="nt">&gt;</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-9"></a>        <span class="nt">&lt;p&gt;</span>A reserved <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://jekyllrb.com"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>Jekyll<span class="nt">&lt;/a&gt;</span> theme that places the utmost gravity on content with a hidden drawer. Made by <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://twitter.com/mdo"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>@mdo<span class="nt">&lt;/a&gt;</span>.<span class="nt">&lt;/p&gt;</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-10"></a>    <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-11"></a>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-12"></a>    <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">"sidebar-nav"</span><span class="nt">&gt;</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-13"></a>        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"sidebar-nav-item active"</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-14"></a>        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"sidebar-nav-item"</span> <span class="na">href=</span><span class="s">"/about/"</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-15"></a>        [...]
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-16"></a>    <span class="nt">&lt;/nav&gt;</span>
<a name="rest_code_d63f2493fe5e4cd1a5f76b38b2955fc8-17"></a><span class="nt">&lt;/div&gt;</span>
</pre>
<p>So, a plain body, with an input element that controls the sidebar, a div which is the sidebar itself.
Inside that, div.sidebar-item for items, and a nav with "navigational links". This is followed by the "masthead" and
the content itself, which we will look at in a bit.</p>
<p>If we look for the equivalent code in Nikola’s side, we see this:</p>
<pre class="code html"><a name="rest_code_2b00925da0bd459bb348a4a6a17c9400-1"></a><span class="nt">&lt;body&gt;</span>
<a name="rest_code_2b00925da0bd459bb348a4a6a17c9400-2"></a><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#content"</span> <span class="na">class=</span><span class="s">"sr-only sr-only-focusable"</span><span class="nt">&gt;</span>Skip to main content<span class="nt">&lt;/a&gt;</span>
<a name="rest_code_2b00925da0bd459bb348a4a6a17c9400-3"></a><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;</span>
<a name="rest_code_2b00925da0bd459bb348a4a6a17c9400-4"></a><span class="nt">&lt;header</span> <span class="na">id=</span><span class="s">"header"</span> <span class="na">role=</span><span class="s">"banner"</span><span class="nt">&gt;</span>
<a name="rest_code_2b00925da0bd459bb348a4a6a17c9400-5"></a><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"brand"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"https://example.com/"</span> <span class="na">title=</span><span class="s">"My Nikola Site"</span> <span class="na">rel=</span><span class="s">"home"</span><span class="nt">&gt;</span> <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"blog-title"</span><span class="nt">&gt;</span>My Nikola Site<span class="nt">&lt;/span&gt;</span> <span class="nt">&lt;/a&gt;&lt;/h1&gt;</span>
<a name="rest_code_2b00925da0bd459bb348a4a6a17c9400-6"></a><span class="nt">&lt;nav</span> <span class="na">id=</span><span class="s">"menu"</span> <span class="na">role=</span><span class="s">"navigation"</span><span class="nt">&gt;&lt;ul&gt;</span>
<a name="rest_code_2b00925da0bd459bb348a4a6a17c9400-7"></a><span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"../archive.html"</span><span class="nt">&gt;</span>Archive<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<a name="rest_code_2b00925da0bd459bb348a4a6a17c9400-8"></a>                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"../categories/index.html"</span><span class="nt">&gt;</span>Tags<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<a name="rest_code_2b00925da0bd459bb348a4a6a17c9400-9"></a>                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"../rss.xml"</span><span class="nt">&gt;</span>RSS feed<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</pre>
<p>So Nikola has the "masthead" above the nav element, and uses list elements in nav instead of bare links.
Not all that different is it?</p>
<p>Let’s make it lanyon-like! We will need 2 more templates: <a class="reference external" href="https://github.com/getnikola/nikola/blob/master/nikola/data/themes/base/templates/base.tmpl">base.tmpl</a> and <a class="reference external" href="https://github.com/getnikola/nikola/blob/master/nikola/data/themes/base/templates/base_header.tmpl">base_header.tmpl</a>. Get them and put them in your <tt class="docutils literal">themes/lanyon/templates</tt> folder.</p>
<p>Let’s look at <tt class="docutils literal">base.tmpl</tt> first. It’s short and nice, it looks like a webpage without
all the interesting stuff:</p>
<pre class="code html+mako"><a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-1"></a><span class="cp">## -*- coding: utf-8 -*-</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-2"></a><span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">name=</span><span class="s">"base"</span> <span class="na">file=</span><span class="s">"base_helper.tmpl"</span> <span class="na">import=</span><span class="s">"*"</span><span class="cp">/&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-3"></a><span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">name=</span><span class="s">"header"</span> <span class="na">file=</span><span class="s">"base_header.tmpl"</span> <span class="na">import=</span><span class="s">"*"</span><span class="cp">/&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-4"></a><span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">name=</span><span class="s">"footer"</span> <span class="na">file=</span><span class="s">"base_footer.tmpl"</span> <span class="na">import=</span><span class="s">"*"</span><span class="cp">/&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-5"></a><span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">name=</span><span class="s">"annotations"</span> <span class="na">file=</span><span class="s">"annotation_helper.tmpl"</span><span class="cp">/&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-6"></a><span class="cp">${</span><span class="n">set_locale</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span><span class="cp">}</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-7"></a><span class="cp">${</span><span class="n">base</span><span class="o">.</span><span class="n">html_headstart</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-8"></a><span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"extra_head"</span><span class="cp">&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-9"></a><span class="cp">### Leave this block alone.</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-10"></a><span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-11"></a><span class="cp">${</span><span class="n">template_hooks</span><span class="p">[</span><span class="s">'extra_head'</span><span class="p">]()</span><span class="cp">}</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-12"></a><span class="nt">&lt;/head&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-13"></a><span class="nt">&lt;body&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-14"></a><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#content"</span> <span class="na">class=</span><span class="s">"sr-only sr-only-focusable"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">messages</span><span class="p">(</span><span class="s">"Skip to main content"</span><span class="p">)</span><span class="cp">}</span><span class="nt">&lt;/a&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-15"></a>    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-16"></a>        <span class="cp">${</span><span class="n">header</span><span class="o">.</span><span class="n">html_header</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-17"></a>        <span class="nt">&lt;main</span> <span class="na">id=</span><span class="s">"content"</span> <span class="na">role=</span><span class="s">"main"</span><span class="nt">&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-18"></a>            <span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-19"></a>        <span class="nt">&lt;/main&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-20"></a>        <span class="cp">${</span><span class="n">footer</span><span class="o">.</span><span class="n">html_footer</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-21"></a>    <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-22"></a>    <span class="cp">${</span><span class="n">body_end</span><span class="cp">}</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-23"></a>    <span class="cp">${</span><span class="n">template_hooks</span><span class="p">[</span><span class="s">'body_end'</span><span class="p">]()</span><span class="cp">}</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-24"></a>    <span class="cp">${</span><span class="n">base</span><span class="o">.</span><span class="n">late_load_js</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-25"></a><span class="nt">&lt;/body&gt;</span>
<a name="rest_code_e10984fba1aa4629a23e22e57bc74fe0-26"></a><span class="nt">&lt;/html&gt;</span>
</pre>
<p>That link which says "Skip to main content" is very important for accessibility, so we will leave it in
place. But below, you can see how it creates the "container" div we see in the Nikola page, and the content is
created by <tt class="docutils literal">html_header()</tt> which is defined in <tt class="docutils literal">base_header.tmpl</tt> The actual <tt class="docutils literal">nav</tt> element is done
by the <tt class="docutils literal">html_navigation_links</tt> function out of the <tt class="docutils literal">NAVIGATION_LINKS</tt> option.</p>
<p>So, first, lets change that base template to be more lanyon-like:</p>
<pre class="code html+mako"><a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-1"></a><span class="cp">## -*- coding: utf-8 -*-</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-2"></a><span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">name=</span><span class="s">"base"</span> <span class="na">file=</span><span class="s">"base_helper.tmpl"</span> <span class="na">import=</span><span class="s">"*"</span><span class="cp">/&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-3"></a><span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">name=</span><span class="s">"header"</span> <span class="na">file=</span><span class="s">"base_header.tmpl"</span> <span class="na">import=</span><span class="s">"*"</span><span class="cp">/&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-4"></a><span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">name=</span><span class="s">"footer"</span> <span class="na">file=</span><span class="s">"base_footer.tmpl"</span> <span class="na">import=</span><span class="s">"*"</span><span class="cp">/&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-5"></a><span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">name=</span><span class="s">"annotations"</span> <span class="na">file=</span><span class="s">"annotation_helper.tmpl"</span><span class="cp">/&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-6"></a><span class="cp">${</span><span class="n">set_locale</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span><span class="cp">}</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-7"></a><span class="cp">${</span><span class="n">base</span><span class="o">.</span><span class="n">html_headstart</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-8"></a><span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"extra_head"</span><span class="cp">&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-9"></a><span class="cp">### Leave this block alone.</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-10"></a><span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-11"></a><span class="cp">${</span><span class="n">template_hooks</span><span class="p">[</span><span class="s">'extra_head'</span><span class="p">]()</span><span class="cp">}</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-12"></a><span class="nt">&lt;/head&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-13"></a><span class="nt">&lt;body&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-14"></a>    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#content"</span> <span class="na">class=</span><span class="s">"sr-only sr-only-focusable"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">messages</span><span class="p">(</span><span class="s">"Skip to main content"</span><span class="p">)</span><span class="cp">}</span><span class="nt">&lt;/a&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-15"></a>    <span class="c">&lt;!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-16"></a><span class="c">            styles, `#sidebar-checkbox` for behavior. --&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-17"></a>    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">class=</span><span class="s">"sidebar-checkbox"</span> <span class="na">id=</span><span class="s">"sidebar-checkbox"</span><span class="nt">&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-18"></a>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-19"></a>    <span class="c">&lt;!-- Toggleable sidebar --&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-20"></a>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sidebar"</span> <span class="na">id=</span><span class="s">"sidebar"</span><span class="nt">&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-21"></a>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sidebar-item"</span><span class="nt">&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-22"></a>            <span class="nt">&lt;p&gt;</span>A reserved <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://getnikola.com"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>Nikola<span class="nt">&lt;/a&gt;</span> theme that places the utmost gravity on content with a hidden drawer. Made by <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://twitter.com/mdo"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>@mdo<span class="nt">&lt;/a&gt;</span> for Jekyll,
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-23"></a>            ported to Nikola by <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://twitter.com/ralsina"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>@ralsina<span class="nt">&lt;/a&gt;</span>.<span class="nt">&lt;/p&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-24"></a>        <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-25"></a>        <span class="cp">${</span><span class="n">header</span><span class="o">.</span><span class="n">html_navigation_links</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-26"></a>    <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-27"></a>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-28"></a>    <span class="nt">&lt;main</span> <span class="na">id=</span><span class="s">"content"</span> <span class="na">role=</span><span class="s">"main"</span><span class="nt">&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-29"></a>        <span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-30"></a>    <span class="nt">&lt;/main&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-31"></a>    <span class="cp">${</span><span class="n">footer</span><span class="o">.</span><span class="n">html_footer</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-32"></a>    <span class="cp">${</span><span class="n">body_end</span><span class="cp">}</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-33"></a>    <span class="cp">${</span><span class="n">template_hooks</span><span class="p">[</span><span class="s">'body_end'</span><span class="p">]()</span><span class="cp">}</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-34"></a>    <span class="cp">${</span><span class="n">base</span><span class="o">.</span><span class="n">late_load_js</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-35"></a><span class="nt">&lt;/body&gt;</span>
<a name="rest_code_1dcc05eeadf2419ba975b4e19547db1a-36"></a><span class="nt">&lt;/html&gt;</span>
</pre>
<div class="figure">
<a class="reference external image-reference" href="https://getnikola.com/images/lanyon-2.png"><img alt="https://getnikola.com/images/lanyon-2.thumbnail.png" src="https://getnikola.com/images/lanyon-2.thumbnail.png"></a>
<p class="caption">And that’s after I exposed the sidebar by clicking on an invisible widget!</p>
</div>
<p>One problem, which causes that yellow color in the sidebar is a CSS conflict.
We are loading <tt class="docutils literal">rst.css</tt> which specifies
the background color of <tt class="docutils literal">div.sidebar</tt> which is more specific than
<tt class="docutils literal">lanyon.css</tt>, which specifies for <tt class="docutils literal">.sidebar</tt> alone.</p>
<p>There are many ways to fix this, I chose to change lanyon.css to also use div.sidebar:</p>
<pre class="code css"><a name="rest_code_e250dc9e622a447aa795f4fd5058c6d0-1"></a><span class="nt">div</span><span class="nc">.sidebar</span><span class="o">,</span><span class="nc">.sidebar</span> <span class="p">{</span>
<a name="rest_code_e250dc9e622a447aa795f4fd5058c6d0-2"></a>    <span class="k">position</span><span class="o">:</span> <span class="k">fixed</span><span class="p">;</span>
<a name="rest_code_e250dc9e622a447aa795f4fd5058c6d0-3"></a>    <span class="k">top</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_e250dc9e622a447aa795f4fd5058c6d0-4"></a>    <span class="k">bottom</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_e250dc9e622a447aa795f4fd5058c6d0-5"></a>    <span class="k">left</span><span class="o">:</span> <span class="m">-14</span><span class="n">rem</span><span class="p">;</span>
<a name="rest_code_e250dc9e622a447aa795f4fd5058c6d0-6"></a>    <span class="k">width</span><span class="o">:</span> <span class="m">14</span><span class="n">rem</span><span class="p">;</span>
<a name="rest_code_e250dc9e622a447aa795f4fd5058c6d0-7"></a>    <span class="p">[</span><span class="o">...</span><span class="p">]</span>
</pre>
<p>This is annoying but it will happen when you just grab CSS from different places. The "Inspect Element"
feature of your web browser is your best friend for these situations.</p>
<p>Another problem is that the contents of the nav element are wrong. They are not bare links. We will fix that in
<tt class="docutils literal">base_header.html</tt>, like this:</p>
<pre class="code html+mako"><a name="rest_code_227de1bd90c842a69a8033a9bfd0d691-1"></a><span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_navigation_links()"</span><span class="cp">&gt;</span>
<a name="rest_code_227de1bd90c842a69a8033a9bfd0d691-2"></a>    <span class="nt">&lt;nav</span> <span class="na">id=</span><span class="s">"menu"</span> <span class="na">role=</span><span class="s">"navigation"</span> <span class="na">class=</span><span class="s">"sidebar-nav"</span><span class="nt">&gt;</span>
<a name="rest_code_227de1bd90c842a69a8033a9bfd0d691-3"></a>    <span class="cp">%</span><span class="k">for</span> <span class="n">url</span><span class="p">,</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">navigation_links</span><span class="p">[</span><span class="n">lang</span><span class="p">]:</span>
<a name="rest_code_227de1bd90c842a69a8033a9bfd0d691-4"></a>        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"sidebar-nav-item"</span> <span class="na">href=</span><span class="s">"</span><span class="cp">${</span><span class="n">url</span><span class="cp">}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">text</span><span class="cp">}</span><span class="nt">&lt;/a&gt;</span>
<a name="rest_code_227de1bd90c842a69a8033a9bfd0d691-5"></a>    <span class="cp">%</span><span class="k">endfor</span>
<a name="rest_code_227de1bd90c842a69a8033a9bfd0d691-6"></a>    <span class="cp">${</span><span class="n">template_hooks</span><span class="p">[</span><span class="s">'menu'</span><span class="p">]()</span><span class="cp">}</span>
<a name="rest_code_227de1bd90c842a69a8033a9bfd0d691-7"></a>    <span class="cp">${</span><span class="n">template_hooks</span><span class="p">[</span><span class="s">'menu_alt'</span><span class="p">]()</span><span class="cp">}</span>
<a name="rest_code_227de1bd90c842a69a8033a9bfd0d691-8"></a>    <span class="nt">&lt;/nav&gt;</span>
<a name="rest_code_227de1bd90c842a69a8033a9bfd0d691-9"></a><span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span>
</pre>
<p><strong>Note: this means this theme will not support submenus in navigation. If you want that, I’ll happily take a patch.</strong></p>
<div class="figure">
<a class="reference external image-reference" href="https://getnikola.com/images/lanyon-3.png"><img alt="https://getnikola.com/images/lanyon-3.thumbnail.png" src="https://getnikola.com/images/lanyon-3.thumbnail.png"></a>
<p class="caption">Starting to see a resemblance?</p>
</div>
<p>Now let’s look at the content. In Lanyon, this is how the "main" content looks:</p>
<pre class="code html"><a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-1"></a><span class="c">&lt;!-- Wrap is the content to shift when toggling the sidebar. We wrap the</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-2"></a><span class="c">     content to avoid any CSS collisions with our real content. --&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-3"></a><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"wrap"</span><span class="nt">&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-4"></a>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"masthead"</span><span class="nt">&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-5"></a>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-6"></a>      <span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">"masthead-title"</span><span class="nt">&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-7"></a>        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/"</span> <span class="na">title=</span><span class="s">"Home"</span><span class="nt">&gt;</span>Lanyon<span class="nt">&lt;/a&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-8"></a>        <span class="nt">&lt;small&gt;</span>A Jekyll theme<span class="nt">&lt;/small&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-9"></a>      <span class="nt">&lt;/h3&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-10"></a>    <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-11"></a>  <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-12"></a>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-13"></a>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container content"</span><span class="nt">&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-14"></a>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"post"</span><span class="nt">&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-15"></a>        <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"post-title"</span><span class="nt">&gt;</span>Introducing Lanyon<span class="nt">&lt;/h1&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-16"></a>        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"post-date"</span><span class="nt">&gt;</span>02 Jan 2014<span class="nt">&lt;/span&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-17"></a>        <span class="nt">&lt;p&gt;</span>Lanyon is an unassuming <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://jekyllrb.com"</span><span class="nt">&gt;</span>Jekyll<span class="nt">&lt;/a&gt;</span> theme [...]
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-18"></a>    <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-19"></a>  <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-20"></a><span class="nt">&lt;/div&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-21"></a><span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"sidebar-checkbox"</span> <span class="na">class=</span><span class="s">"sidebar-toggle"</span><span class="nt">&gt;&lt;/label&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-22"></a><span class="nt">&lt;/body&gt;</span>
<a name="rest_code_65009f43e4f0400fa3aaf3b671c06854-23"></a><span class="nt">&lt;/html&gt;</span>
</pre>
<p>Everything inside the "container content" div is… the content. The rest is a masthead with the site title
and at the bottom a label for the sidebar toggle. Easy to do in <tt class="docutils literal">base.tmpl</tt>
(only showing the relevant part):</p>
<pre class="code html+mako"><a name="rest_code_444483ff1c4440aab163098f5ef23b34-1"></a>    <span class="c">&lt;!-- Wrap is the content to shift when toggling the sidebar. We wrap the</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-2"></a><span class="c">        content to avoid any CSS collisions with our real content. --&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-3"></a>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"wrap"</span><span class="nt">&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-4"></a>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"masthead"</span><span class="nt">&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-5"></a>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-6"></a>        <span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">"masthead-title"</span><span class="nt">&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-7"></a>            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/"</span> <span class="na">title=</span><span class="s">"Home"</span><span class="nt">&gt;</span>Lanyon<span class="nt">&lt;/a&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-8"></a>            <span class="nt">&lt;small&gt;</span>A Jekyll theme<span class="nt">&lt;/small&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-9"></a>        <span class="nt">&lt;/h3&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-10"></a>        <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-11"></a>    <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-12"></a>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-13"></a>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container content"</span> <span class="na">id=</span><span class="s">"content"</span><span class="nt">&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-14"></a>        <span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-15"></a>    <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-16"></a>    <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-17"></a>    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"sidebar-checkbox"</span> <span class="na">class=</span><span class="s">"sidebar-toggle"</span><span class="nt">&gt;&lt;/label&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-18"></a>    <span class="cp">${</span><span class="n">footer</span><span class="o">.</span><span class="n">html_footer</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-19"></a>    <span class="cp">${</span><span class="n">body_end</span><span class="cp">}</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-20"></a>    <span class="cp">${</span><span class="n">template_hooks</span><span class="p">[</span><span class="s">'body_end'</span><span class="p">]()</span><span class="cp">}</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-21"></a>    <span class="cp">${</span><span class="n">base</span><span class="o">.</span><span class="n">late_load_js</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-22"></a><span class="nt">&lt;/body&gt;</span>
<a name="rest_code_444483ff1c4440aab163098f5ef23b34-23"></a><span class="nt">&lt;/html&gt;</span>
</pre>
<div class="figure">
<a class="reference external image-reference" href="https://getnikola.com/images/lanyon-4.png"><img alt="https://getnikola.com/images/lanyon-4.thumbnail.png" src="https://getnikola.com/images/lanyon-4.thumbnail.png"></a>
<p class="caption">Getting there!</p>
</div>
<p>The sidebar looks bad because of yet more CSS conflicts with <tt class="docutils literal">rst.css</tt>. By
adding some extra styling in <tt class="docutils literal">lanyon.css</tt>, it will look better.</p>
<pre class="code css"><a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-1"></a><span class="c">/* Style and "hide" the sidebar */</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-2"></a><span class="nt">div</span><span class="nc">.sidebar</span><span class="o">,</span> <span class="nc">.sidebar</span> <span class="p">{</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-3"></a>  <span class="k">position</span><span class="o">:</span> <span class="k">fixed</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-4"></a>  <span class="k">top</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-5"></a>  <span class="k">bottom</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-6"></a>  <span class="k">left</span><span class="o">:</span> <span class="m">-14</span><span class="n">rem</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-7"></a>  <span class="k">width</span><span class="o">:</span> <span class="m">14</span><span class="n">rem</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-8"></a>  <span class="k">visibility</span><span class="o">:</span> <span class="k">hidden</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-9"></a>  <span class="k">overflow-y</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-10"></a>  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-11"></a>  <span class="k">margin</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-12"></a>  <span class="k">border</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-13"></a>  <span class="k">font-family</span><span class="o">:</span> <span class="s2">"PT Sans"</span><span class="o">,</span> <span class="n">Helvetica</span><span class="o">,</span> <span class="n">Arial</span><span class="o">,</span> <span class="k">sans-serif</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-14"></a>  <span class="k">font-size</span><span class="o">:</span> <span class="o">.</span><span class="m">875</span><span class="n">rem</span><span class="p">;</span> <span class="c">/* 15px */</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-15"></a>  <span class="k">color</span><span class="o">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">255</span><span class="o">,</span><span class="m">255</span><span class="o">,</span><span class="m">255</span><span class="o">,.</span><span class="m">6</span><span class="p">);</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-16"></a>  <span class="k">background-color</span><span class="o">:</span> <span class="m">#202020</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-17"></a>  <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">transition</span><span class="o">:</span> <span class="n">all</span> <span class="m">.3s</span> <span class="n">ease</span><span class="o">-</span><span class="n">in</span><span class="o">-</span><span class="n">out</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-18"></a>          <span class="n">transition</span><span class="o">:</span> <span class="n">all</span> <span class="m">.3s</span> <span class="n">ease</span><span class="o">-</span><span class="n">in</span><span class="o">-</span><span class="n">out</span><span class="p">;</span>
<a name="rest_code_12d6f3fe5e374bc9a232a638d0132ec0-19"></a><span class="p">}</span>
</pre>
<p>Also, the accessibility link on top is visible when it should not. That’s
because we removed <tt class="docutils literal">theme.css</tt> from the base theme, and with it, we lost a
couple of classes. We can add them in <tt class="docutils literal">lanyon.css</tt>, along with others used by other
pieces of the site:</p>
<pre class="code css"><a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-1"></a><span class="nc">.sr-only</span> <span class="p">{</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-2"></a>  <span class="k">position</span><span class="o">:</span> <span class="k">absolute</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-3"></a>  <span class="k">width</span><span class="o">:</span> <span class="m">1px</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-4"></a>  <span class="k">height</span><span class="o">:</span> <span class="m">1px</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-5"></a>  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-6"></a>  <span class="k">margin</span><span class="o">:</span> <span class="m">-1px</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-7"></a>  <span class="k">overflow</span><span class="o">:</span> <span class="k">hidden</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-8"></a>  <span class="k">clip</span><span class="o">:</span> <span class="n">rect</span><span class="p">(</span><span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="p">);</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-9"></a>  <span class="k">border</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-10"></a><span class="p">}</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-11"></a>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-12"></a><span class="nc">.sr-only-focusable</span><span class="nd">:active</span><span class="o">,</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-13"></a><span class="nc">.sr-only-focusable</span><span class="nd">:focus</span> <span class="p">{</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-14"></a>  <span class="k">position</span><span class="o">:</span> <span class="k">static</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-15"></a>  <span class="k">width</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-16"></a>  <span class="k">height</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-17"></a>  <span class="k">margin</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-18"></a>  <span class="k">overflow</span><span class="o">:</span> <span class="k">visible</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-19"></a>  <span class="k">clip</span><span class="o">:</span> <span class="k">auto</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-20"></a><span class="p">}</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-21"></a>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-22"></a><span class="nc">.breadcrumb</span> <span class="p">{</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-23"></a>  <span class="k">padding</span><span class="o">:</span> <span class="m">8px</span> <span class="m">15px</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-24"></a>  <span class="k">margin-bottom</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-25"></a>  <span class="k">list-style</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-26"></a><span class="p">}</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-27"></a>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-28"></a><span class="nc">.breadcrumb</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="p">{</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-29"></a>  <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-30"></a>  <span class="k">margin-right</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-31"></a>  <span class="k">margin-left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-32"></a><span class="p">}</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-33"></a>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-34"></a><span class="nc">.breadcrumb</span> <span class="o">&gt;</span> <span class="nt">li</span><span class="nd">:after</span> <span class="p">{</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-35"></a>  <span class="k">content</span><span class="o">:</span> <span class="s1">' / '</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-36"></a>  <span class="k">color</span><span class="o">:</span> <span class="m">#888</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-37"></a><span class="p">}</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-38"></a>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-39"></a><span class="nc">.breadcrumb</span> <span class="o">&gt;</span> <span class="nt">li</span><span class="nd">:last-of-type:after</span> <span class="p">{</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-40"></a>  <span class="k">content</span><span class="o">:</span> <span class="s1">''</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-41"></a>  <span class="k">margin-left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-42"></a><span class="p">}</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-43"></a>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-44"></a><span class="nc">.thumbnails</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="p">{</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-45"></a>  <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-46"></a>  <span class="k">margin-right</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-47"></a><span class="p">}</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-48"></a>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-49"></a><span class="nc">.thumbnails</span> <span class="o">&gt;</span> <span class="nt">li</span><span class="nd">:last-of-type</span> <span class="p">{</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-50"></a>  <span class="k">margin-right</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
<a name="rest_code_03f3b0e7b148489fb1fe82e04a443f9d-51"></a><span class="p">}</span>
</pre>
<div class="figure">
<a class="reference external image-reference" href="https://getnikola.com/images/lanyon-5.png"><img alt="https://getnikola.com/images/lanyon-5.thumbnail.png" src="https://getnikola.com/images/lanyon-5.thumbnail.png"></a>
<p class="caption">Little by little, things look better.</p>
</div>
<p>One clear problem is that the title "Lanyon · A Jekyll theme" is set in the
theme itself. We don’t do that sort of thing in Nikola, we have settings for
that. So, let’s use them. There is a <tt class="docutils literal">html_site_title</tt> function in
<tt class="docutils literal">base_helper.tmpl</tt> which is just the thing. So we change base.tmpl to use it:</p>
<pre class="code html+mako"><a name="rest_code_419b2429b7724dd59faecc8b409fac21-1"></a><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"wrap"</span><span class="nt">&gt;</span>
<a name="rest_code_419b2429b7724dd59faecc8b409fac21-2"></a>  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"masthead"</span><span class="nt">&gt;</span>
<a name="rest_code_419b2429b7724dd59faecc8b409fac21-3"></a>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
<a name="rest_code_419b2429b7724dd59faecc8b409fac21-4"></a>      <span class="cp">${</span><span class="n">header</span><span class="o">.</span><span class="n">html_site_title</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_419b2429b7724dd59faecc8b409fac21-5"></a>    <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_419b2429b7724dd59faecc8b409fac21-6"></a>  <span class="nt">&lt;/div&gt;</span>
</pre>
<p>That’s a <tt class="docutils literal">&lt;h1&gt;</tt> instead of a <tt class="docutils literal">&lt;h3&gt;</tt> like Lanyon does, but hey, it’s the
right thing to do. If you want to go with an <tt class="docutils literal">&lt;h3&gt;</tt>, just
change <tt class="docutils literal">html_site_title</tt> itself.</p>
<p>And now we more or less have the correct page layout and styles. Except for a
rather large thing…</p>
</div>
<div class="section" id="typography">
<h2>Typography</h2>
<p>You can see in the previous screenshot that text still looks quite different in our port: Serif versus Sans-Serif
content, and the titles have different colors!</p>
<p>Let’s start with the titles. Here’s how they look in Lanyon:</p>
<pre class="code html"><a name="rest_code_2f46bd6b42a1490c9ad2aec9b97a1ae0-1"></a><span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">"masthead-title"</span><span class="nt">&gt;</span>
<a name="rest_code_2f46bd6b42a1490c9ad2aec9b97a1ae0-2"></a>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/"</span> <span class="na">title=</span><span class="s">"Home"</span><span class="nt">&gt;</span>Lanyon<span class="nt">&lt;/a&gt;</span>
<a name="rest_code_2f46bd6b42a1490c9ad2aec9b97a1ae0-3"></a>  <span class="nt">&lt;small&gt;</span>A Jekyll theme<span class="nt">&lt;/small&gt;</span>
<a name="rest_code_2f46bd6b42a1490c9ad2aec9b97a1ae0-4"></a><span class="nt">&lt;/h3&gt;</span>
</pre>
<p>Versus our port:</p>
<pre class="code html"><a name="rest_code_d3a407d7f6d14f5a81149e83b26a4207-1"></a><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"brand"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"https://example.com/"</span> <span class="na">title=</span><span class="s">"My Nikola Site"</span> <span class="na">rel=</span><span class="s">"home"</span><span class="nt">&gt;</span>
</pre>
<p>So, it looks like we will have to fix <tt class="docutils literal">html_site_title</tt> after all:</p>
<pre class="code html+mako"><a name="rest_code_800563c6026440fc857022867ee71f8f-1"></a><span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_site_title()"</span><span class="cp">&gt;</span>
<a name="rest_code_800563c6026440fc857022867ee71f8f-2"></a>    <span class="nt">&lt;h3</span> <span class="na">id=</span><span class="s">"brand"</span> <span class="na">class=</span><span class="s">"masthead-title"</span><span class="nt">&gt;</span>
<a name="rest_code_800563c6026440fc857022867ee71f8f-3"></a>    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">${</span><span class="n">abs_link</span><span class="p">(</span><span class="n">_link</span><span class="p">(</span><span class="s">"root"</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">lang</span><span class="p">))</span><span class="cp">}</span><span class="s">"</span> <span class="na">title=</span><span class="s">"</span><span class="cp">${</span><span class="n">blog_title</span><span class="cp">}</span><span class="s">"</span> <span class="na">rel=</span><span class="s">"home"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">blog_title</span><span class="cp">}</span><span class="nt">&lt;/a&gt;</span>
<a name="rest_code_800563c6026440fc857022867ee71f8f-4"></a>    <span class="nt">&lt;/h3&gt;</span>
<a name="rest_code_800563c6026440fc857022867ee71f8f-5"></a><span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span>
</pre>
<p>As for the actual content, that’s not in any of the templates we have seen so far. The page you see is an
"index.tmpl" page, which means it’s a list of blog posts shown one below the
other. Obviously it’s not doing
things in the way the Lanyon CSS expects it to. Here’s the original, which you
can find in Nikola’s source
code:</p>
<pre class="code html+mako"><a name="rest_code_00e57572c41c48af8c384b85a9b8375d-1"></a><span class="cp">## -*- coding: utf-8 -*-</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-2"></a><span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">name=</span><span class="s">"helper"</span> <span class="na">file=</span><span class="s">"index_helper.tmpl"</span><span class="cp">/&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-3"></a><span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">name=</span><span class="s">"comments"</span> <span class="na">file=</span><span class="s">"comments_helper.tmpl"</span><span class="cp">/&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-4"></a><span class="cp">&lt;%</span><span class="nb">inherit</span> <span class="na">file=</span><span class="s">"base.tmpl"</span><span class="cp">/&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-5"></a>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-6"></a><span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"extra_head"</span><span class="cp">&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-7"></a>    <span class="cp">${</span><span class="n">parent</span><span class="o">.</span><span class="n">extra_head</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-8"></a>    <span class="cp">%</span> <span class="k">if</span> <span class="n">posts</span> <span class="ow">and</span> <span class="p">(</span><span class="n">permalink</span> <span class="o">==</span> <span class="s">'/'</span> <span class="ow">or</span> <span class="n">permalink</span> <span class="o">==</span> <span class="s">'/'</span> <span class="o">+</span> <span class="n">index_file</span><span class="p">):</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-9"></a>        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"prefetch"</span> <span class="na">href=</span><span class="s">"</span><span class="cp">${</span><span class="n">posts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">permalink</span><span class="p">()</span><span class="cp">}</span><span class="s">"</span> <span class="na">type=</span><span class="s">"text/html"</span><span class="nt">&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-10"></a>    <span class="cp">%</span><span class="k"> endif</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-11"></a><span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-12"></a>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-13"></a><span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-14"></a><span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content_header"</span><span class="cp">&gt;&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-15"></a><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"postindex"</span><span class="nt">&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-16"></a><span class="cp">%</span> <span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">posts</span><span class="p">:</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-17"></a>    <span class="nt">&lt;article</span> <span class="na">class=</span><span class="s">"h-entry post-</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">meta</span><span class="p">(</span><span class="s">'type'</span><span class="p">)</span><span class="cp">}</span><span class="s">"</span><span class="nt">&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-18"></a>    <span class="nt">&lt;header&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-19"></a>        <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"p-name entry-title"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">permalink</span><span class="p">()</span><span class="cp">}</span><span class="s">"</span> <span class="na">class=</span><span class="s">"u-url"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">|</span><span class="n">h</span><span class="cp">}</span><span class="nt">&lt;/a&gt;&lt;/h1&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-20"></a>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"metadata"</span><span class="nt">&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-21"></a>            <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"byline author vcard"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"byline-name fn"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">author</span><span class="p">()</span><span class="cp">}</span><span class="nt">&lt;/span&gt;&lt;/p&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-22"></a>            <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"dateline"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">permalink</span><span class="p">()</span><span class="cp">}</span><span class="s">"</span> <span class="na">rel=</span><span class="s">"bookmark"</span><span class="nt">&gt;&lt;time</span> <span class="na">class=</span><span class="s">"published dt-published"</span> <span class="na">datetime=</span><span class="s">"</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span><span class="cp">}</span><span class="s">"</span> <span class="na">title=</span><span class="s">"</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">formatted_date</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="cp">}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">formatted_date</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="cp">}</span><span class="nt">&lt;/time&gt;&lt;/a&gt;&lt;/p&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-23"></a>            <span class="cp">%</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">post</span><span class="o">.</span><span class="n">meta</span><span class="p">(</span><span class="s">'nocomments'</span><span class="p">)</span> <span class="ow">and</span> <span class="n">site_has_comments</span><span class="p">:</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-24"></a>                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"commentline"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">comments</span><span class="o">.</span><span class="n">comment_link</span><span class="p">(</span><span class="n">post</span><span class="o">.</span><span class="n">permalink</span><span class="p">(),</span> <span class="n">post</span><span class="o">.</span><span class="n">_base_path</span><span class="p">)</span><span class="cp">}</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-25"></a>            <span class="cp">%</span><span class="k"> endif</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-26"></a>        <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-27"></a>    <span class="nt">&lt;/header&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-28"></a>    <span class="cp">%</span><span class="k">if</span> <span class="n">index_teasers</span><span class="p">:</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-29"></a>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"p-summary entry-summary"</span><span class="nt">&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-30"></a>    <span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">teaser_only</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="cp">}</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-31"></a>    <span class="cp">%</span><span class="k">else</span><span class="p">:</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-32"></a>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"e-content entry-content"</span><span class="nt">&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-33"></a>    <span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">teaser_only</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="cp">}</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-34"></a>    <span class="cp">%</span><span class="k">endif</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-35"></a>    <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-36"></a>    <span class="nt">&lt;/article&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-37"></a><span class="cp">%</span><span class="k"> endfor</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-38"></a><span class="nt">&lt;/div&gt;</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-39"></a><span class="cp">${</span><span class="n">helper</span><span class="o">.</span><span class="n">html_pager</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-40"></a><span class="cp">${</span><span class="n">comments</span><span class="o">.</span><span class="n">comment_link_script</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-41"></a><span class="cp">${</span><span class="n">helper</span><span class="o">.</span><span class="n">mathjax_script</span><span class="p">(</span><span class="n">posts</span><span class="p">)</span><span class="cp">}</span>
<a name="rest_code_00e57572c41c48af8c384b85a9b8375d-42"></a><span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span>
</pre>
<p>And this is how it looks after I played with it for a while, making it generate code that looks closer to
the Lanyon original:</p>
<pre class="code html+mako"><a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-1"></a><span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-2"></a><span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content_header"</span><span class="cp">&gt;&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-3"></a><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"posts"</span><span class="nt">&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-4"></a><span class="cp">%</span> <span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">posts</span><span class="p">:</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-5"></a>    <span class="nt">&lt;article</span> <span class="na">class=</span><span class="s">"post h-entry post-</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">meta</span><span class="p">(</span><span class="s">'type'</span><span class="p">)</span><span class="cp">}</span><span class="s">"</span><span class="nt">&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-6"></a>    <span class="nt">&lt;header&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-7"></a>        <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"post-title p-name"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">permalink</span><span class="p">()</span><span class="cp">}</span><span class="s">"</span> <span class="na">class=</span><span class="s">"u-url"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">|</span><span class="n">h</span><span class="cp">}</span><span class="nt">&lt;/a&gt;&lt;/h1&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-8"></a>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"metadata"</span><span class="nt">&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-9"></a>            <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"byline author vcard"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"byline-name fn"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">author</span><span class="p">()</span><span class="cp">}</span><span class="nt">&lt;/span&gt;&lt;/p&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-10"></a>            <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"dateline"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">permalink</span><span class="p">()</span><span class="cp">}</span><span class="s">"</span> <span class="na">rel=</span><span class="s">"bookmark"</span><span class="nt">&gt;&lt;time</span> <span class="na">class=</span><span class="s">"post-date published dt-published"</span> <span class="na">datetime=</span><span class="s">"</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span><span class="cp">}</span><span class="s">"</span> <span class="na">title=</span><span class="s">"</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">formatted_date</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="cp">}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">formatted_date</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="cp">}</span><span class="nt">&lt;/time&gt;&lt;/a&gt;&lt;/p&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-11"></a>            <span class="cp">%</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">post</span><span class="o">.</span><span class="n">meta</span><span class="p">(</span><span class="s">'nocomments'</span><span class="p">)</span> <span class="ow">and</span> <span class="n">site_has_comments</span><span class="p">:</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-12"></a>                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"commentline"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">comments</span><span class="o">.</span><span class="n">comment_link</span><span class="p">(</span><span class="n">post</span><span class="o">.</span><span class="n">permalink</span><span class="p">(),</span> <span class="n">post</span><span class="o">.</span><span class="n">_base_path</span><span class="p">)</span><span class="cp">}</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-13"></a>            <span class="cp">%</span><span class="k"> endif</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-14"></a>        <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-15"></a>    <span class="nt">&lt;/header&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-16"></a>    <span class="cp">%</span><span class="k">if</span> <span class="n">index_teasers</span><span class="p">:</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-17"></a>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"p-summary entry-summary"</span><span class="nt">&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-18"></a>    <span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">teaser_only</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="cp">}</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-19"></a>    <span class="cp">%</span><span class="k">else</span><span class="p">:</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-20"></a>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"e-content entry-content"</span><span class="nt">&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-21"></a>    <span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">teaser_only</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="cp">}</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-22"></a>    <span class="cp">%</span><span class="k">endif</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-23"></a>    <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-24"></a>    <span class="nt">&lt;/article&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-25"></a><span class="cp">%</span><span class="k"> endfor</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-26"></a><span class="nt">&lt;/div&gt;</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-27"></a><span class="cp">${</span><span class="n">helper</span><span class="o">.</span><span class="n">html_pager</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-28"></a><span class="cp">${</span><span class="n">comments</span><span class="o">.</span><span class="n">comment_link_script</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-29"></a><span class="cp">${</span><span class="n">helper</span><span class="o">.</span><span class="n">mathjax_script</span><span class="p">(</span><span class="n">posts</span><span class="p">)</span><span class="cp">}</span>
<a name="rest_code_94c14e48e46b4bdc9548d948040b5a5f-30"></a><span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span>
</pre>
<p>With these changes, it looks… similar?</p>
<div class="figure">
<a class="reference external image-reference" href="https://getnikola.com/images/lanyon-6.png"><img alt="https://getnikola.com/images/lanyon-6.thumbnail.png" src="https://getnikola.com/images/lanyon-6.thumbnail.png"></a>
<p class="caption">It does!</p>
</div>
<p>Similar changes (basically adding class names to elements) needed to be done in <tt class="docutils literal">post_header.tmpl</tt>:</p>
<pre class="code html+mako"><a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-1"></a><span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_post_header()"</span><span class="cp">&gt;</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-2"></a>    <span class="nt">&lt;header&gt;</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-3"></a>        <span class="cp">${</span><span class="n">html_title</span><span class="p">()</span><span class="cp">}</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-4"></a>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"metadata"</span><span class="nt">&gt;</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-5"></a>            <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"byline author vcard"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"byline-name fn"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">author</span><span class="p">()</span><span class="cp">}</span><span class="nt">&lt;/span&gt;&lt;/p&gt;</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-6"></a>            <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"dateline"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">permalink</span><span class="p">()</span><span class="cp">}</span><span class="s">"</span> <span class="na">rel=</span><span class="s">"bookmark"</span><span class="nt">&gt;&lt;time</span> <span class="na">class=</span><span class="s">"post-date published dt-published"</span> <span class="na">datetime=</span><span class="s">"</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span><span class="cp">}</span><span class="s">"</span> <span class="na">itemprop=</span><span class="s">"datePublished"</span> <span class="na">title=</span><span class="s">"</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">formatted_date</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="cp">}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">formatted_date</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="cp">}</span><span class="nt">&lt;/time&gt;&lt;/a&gt;&lt;/p&gt;</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-7"></a>            <span class="cp">%</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">post</span><span class="o">.</span><span class="n">meta</span><span class="p">(</span><span class="s">'nocomments'</span><span class="p">)</span> <span class="ow">and</span> <span class="n">site_has_comments</span><span class="p">:</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-8"></a>                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"commentline"</span><span class="nt">&gt;</span><span class="cp">${</span><span class="n">comments</span><span class="o">.</span><span class="n">comment_link</span><span class="p">(</span><span class="n">post</span><span class="o">.</span><span class="n">permalink</span><span class="p">(),</span> <span class="n">post</span><span class="o">.</span><span class="n">_base_path</span><span class="p">)</span><span class="cp">}</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-9"></a>            <span class="cp">%</span><span class="k"> endif</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-10"></a>            <span class="cp">%</span><span class="k">if</span> <span class="n">post</span><span class="o">.</span><span class="n">description</span><span class="p">():</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-11"></a>                <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"description"</span> <span class="na">itemprop=</span><span class="s">"description"</span> <span class="na">content=</span><span class="s">"</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">description</span><span class="p">()</span><span class="cp">}</span><span class="s">"</span><span class="nt">&gt;</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-12"></a>            <span class="cp">%</span><span class="k">endif</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-13"></a>        <span class="nt">&lt;/div&gt;</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-14"></a>        <span class="cp">${</span><span class="n">html_translations</span><span class="p">(</span><span class="n">post</span><span class="p">)</span><span class="cp">}</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-15"></a>    <span class="nt">&lt;/header&gt;</span>
<a name="rest_code_d46f369aaeaf47fd9ba12d99e283199f-16"></a><span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span>
</pre>
</div>
<div class="section" id="customization">
<h2>Customization</h2>
<p>The original Lanyon theme supports some personalization options. It suggests you do them by tweaking the templates, and
you <em>can</em> also do that in the Nikola port. But we prefer to use options for that, so that you can get a later, better
version of the theme and it will still "just work".</p>
<p>Let’s see the color schemes first. They apply easily, just tweak your <tt class="docutils literal">body</tt> element like this:</p>
<pre class="code html"><a name="rest_code_78d5e4f780624e76907b9b90c9b0a665-1"></a><span class="nt">&lt;body</span> <span class="na">class=</span><span class="s">"theme-base-08"</span><span class="nt">&gt;</span>
<a name="rest_code_78d5e4f780624e76907b9b90c9b0a665-2"></a>...
<a name="rest_code_78d5e4f780624e76907b9b90c9b0a665-3"></a><span class="nt">&lt;/body&gt;</span>
</pre>
<p>We can tweak <tt class="docutils literal">base.tmpl</tt> to do just that:</p>
<pre class="code html+mako"><a name="rest_code_73a5830cf5504c4ea8355c724764de88-1"></a><span class="cp">%</span> <span class="k">if</span> <span class="n">lanyon_subtheme</span><span class="p">:</span>
<a name="rest_code_73a5830cf5504c4ea8355c724764de88-2"></a><span class="nt">&lt;body</span> <span class="na">class=</span><span class="s">"</span><span class="cp">${</span><span class="n">lanyon_subtheme</span><span class="cp">}</span><span class="s">"</span><span class="nt">&gt;</span>
<a name="rest_code_73a5830cf5504c4ea8355c724764de88-3"></a><span class="cp">%</span><span class="k">else</span><span class="p">:</span>
<a name="rest_code_73a5830cf5504c4ea8355c724764de88-4"></a><span class="nt">&lt;body&gt;</span>
<a name="rest_code_73a5830cf5504c4ea8355c724764de88-5"></a><span class="cp">%</span><span class="k">endif</span>
</pre>
<p>And then we can put the options in conf.py’s <tt class="docutils literal">GLOBAL_CONTEXT</tt>:</p>
<pre class="code python"><a name="rest_code_f21a9b13b9a54b48b18694bc59e76f7e-1"></a><span class="n">GLOBAL_CONTEXT</span> <span class="o">=</span> <span class="p">{</span>
<a name="rest_code_f21a9b13b9a54b48b18694bc59e76f7e-2"></a>    <span class="s">"lanyon_subtheme"</span><span class="p">:</span> <span class="s">"theme-base-08"</span>
<a name="rest_code_f21a9b13b9a54b48b18694bc59e76f7e-3"></a><span class="p">}</span>
</pre>
<div class="figure">
<a class="reference external image-reference" href="https://getnikola.com/images/lanyon-7.png"><img alt="https://getnikola.com/images/lanyon-7.thumbnail.png" src="https://getnikola.com/images/lanyon-7.thumbnail.png"></a>
<p class="caption">Look at it, all themed up.</p>
</div>
<p>Doing the same for layout-reverse, sidebar-overlay and the rest is left as an exercise for the reader.</p>
</div>
<div class="section" id="bundles">
<h2>Bundles</h2>
<p>If you have <tt class="docutils literal">webassets</tt> installed and the <tt class="docutils literal">USE_BUNDLES</tt> option set to True, Nikola can put several CSS or JS files together in a larger file,
which makes sites load faster. To do that, your theme needs a <tt class="docutils literal">bundles</tt> file where the syntax is:</p>
<pre class="literal-block">
outputfile1.js=thing1.js,thing2.js,...
outputfile2.css=thing1.css,thing2.css,...
</pre>
<p>For the Lanyon theme, it should be like this:</p>
<pre class="literal-block">
assets/css/all.css=rst.css,code.css,poole.css,lanyon.css,custom.css
</pre>
<p><strong>Note:</strong> Some themes also support the <tt class="docutils literal">USE_CDN</tt> option meaning that in some cases it will load one bundle with all CSS and in other will load some CSS files
from a CDN and others from a bundle. This is complicated and probably not worth the effort.</p>
</div>
<div class="section" id="the-end">
<h2>The End</h2>
<p>And that’s it, that’s a whole theme. Eventually, once people start using it, they will notice small broken details, which will need handling one at a time.</p>
<p>This theme should be available in <a class="reference external" href="http://themes.getnikola.com#lanyon">http://themes.getnikola.com#lanyon</a> and you can see it in action at <a class="reference external" href="https://themes.getnikola.com/v7/lanyon/index.html">https://themes.getnikola.com/v7/lanyon/index.html</a></p>
</div>
</div>
    </div>
</article><footer id="footer"><p>Contents © 2015         <a href="mailto:graham@hayes.ie">Graham Hayes</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="../../assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
