<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="big-rename-error-render.py">
<meta name="viewport" content="width=device-width">
<title>big-rename-error-render.py | graham.hayes.ie</title>
<link href="../assets/css/bitter.css" rel="stylesheet" type="text/css">
<link href="../assets/css/main.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://graham.hayes.ie/listings/big-rename-error-render.py.html">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->
</head>
<body>
    <section class="social"><ul>
<a href="../"><img style="border-radius: 50%; margin-left: auto; margin-right: auto; display: block; margin-bottom: 20px" width="80" height="80" src="../images/me.jpg"></a>
                    <li><a href="../" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../categories" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../projects" title="Projects"><i class="icon-briefcase"></i></a></li>
            <li><a href="../stories/about-me" title="About Me"><i class="icon-info"></i></a></li>
            <li><a href="../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://twitter.com/grahamhayes" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/grahamhayes" title="My Github"><i class="icon-github"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
<nav class="breadcrumbs"><ul class="breadcrumb">
<li><a href=".">listings</a></li>
                <li>big-rename-error-render.py</li>
</ul></nav><h1>big-rename-error-render.py
            <small><a href="big-rename-error-render.py">(Source)</a></small>
        </h1>
    <table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#listingsbig-rename-error-renderpy-1"> 1</a>
<a href="#listingsbig-rename-error-renderpy-2"> 2</a>
<a href="#listingsbig-rename-error-renderpy-3"> 3</a>
<a href="#listingsbig-rename-error-renderpy-4"> 4</a>
<a href="#listingsbig-rename-error-renderpy-5"> 5</a>
<a href="#listingsbig-rename-error-renderpy-6"> 6</a>
<a href="#listingsbig-rename-error-renderpy-7"> 7</a>
<a href="#listingsbig-rename-error-renderpy-8"> 8</a>
<a href="#listingsbig-rename-error-renderpy-9"> 9</a>
<a href="#listingsbig-rename-error-renderpy-10">10</a>
<a href="#listingsbig-rename-error-renderpy-11">11</a>
<a href="#listingsbig-rename-error-renderpy-12">12</a>
<a href="#listingsbig-rename-error-renderpy-13">13</a>
<a href="#listingsbig-rename-error-renderpy-14">14</a>
<a href="#listingsbig-rename-error-renderpy-15">15</a>
<a href="#listingsbig-rename-error-renderpy-16">16</a>
<a href="#listingsbig-rename-error-renderpy-17">17</a>
<a href="#listingsbig-rename-error-renderpy-18">18</a>
<a href="#listingsbig-rename-error-renderpy-19">19</a>
<a href="#listingsbig-rename-error-renderpy-20">20</a>
<a href="#listingsbig-rename-error-renderpy-21">21</a>
<a href="#listingsbig-rename-error-renderpy-22">22</a>
<a href="#listingsbig-rename-error-renderpy-23">23</a>
<a href="#listingsbig-rename-error-renderpy-24">24</a>
<a href="#listingsbig-rename-error-renderpy-25">25</a>
<a href="#listingsbig-rename-error-renderpy-26">26</a>
<a href="#listingsbig-rename-error-renderpy-27">27</a>
<a href="#listingsbig-rename-error-renderpy-28">28</a>
<a href="#listingsbig-rename-error-renderpy-29">29</a>
<a href="#listingsbig-rename-error-renderpy-30">30</a>
<a href="#listingsbig-rename-error-renderpy-31">31</a>
<a href="#listingsbig-rename-error-renderpy-32">32</a>
<a href="#listingsbig-rename-error-renderpy-33">33</a>
<a href="#listingsbig-rename-error-renderpy-34">34</a>
<a href="#listingsbig-rename-error-renderpy-35">35</a>
<a href="#listingsbig-rename-error-renderpy-36">36</a>
<a href="#listingsbig-rename-error-renderpy-37">37</a>
<a href="#listingsbig-rename-error-renderpy-38">38</a>
<a href="#listingsbig-rename-error-renderpy-39">39</a>
<a href="#listingsbig-rename-error-renderpy-40">40</a></pre></div></td>
<td class="code"><pre class="code literal-block"><a name="listingsbig-rename-error-renderpy-1"></a><span class="nd">@classmethod</span>
<a name="listingsbig-rename-error-renderpy-2"></a><span class="k">def</span> <span class="nf">_rename_path_segment</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj_adapter</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">path_segment</span><span class="p">):</span>
<a name="listingsbig-rename-error-renderpy-3"></a>
<a name="listingsbig-rename-error-renderpy-4"></a>    <span class="c1"># Check if the object is a list - lists will just have an index as a</span>
<a name="listingsbig-rename-error-renderpy-5"></a>    <span class="c1"># value, ands this can't be renamed</span>
<a name="listingsbig-rename-error-renderpy-6"></a>    <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">obj_adapter</span><span class="o">.</span><span class="n">ADAPTER_OBJECT</span><span class="p">,</span> <span class="n">objects</span><span class="o">.</span><span class="n">ListObjectMixin</span><span class="p">):</span>
<a name="listingsbig-rename-error-renderpy-7"></a>        <span class="n">obj_adapter</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_object_adapter</span><span class="p">(</span>
<a name="listingsbig-rename-error-renderpy-8"></a>            <span class="bp">cls</span><span class="o">.</span><span class="n">ADAPTER_FORMAT</span><span class="p">,</span>
<a name="listingsbig-rename-error-renderpy-9"></a>            <span class="n">obj_adapter</span><span class="o">.</span><span class="n">ADAPTER_OBJECT</span><span class="o">.</span><span class="n">LIST_ITEM_TYPE</span><span class="o">.</span><span class="n">obj_name</span><span class="p">())</span>
<a name="listingsbig-rename-error-renderpy-10"></a>        <span class="c1"># Return the segment as is, and the next adapter (which is the</span>
<a name="listingsbig-rename-error-renderpy-11"></a>        <span class="c1"># LIST_ITEM_TYPE)</span>
<a name="listingsbig-rename-error-renderpy-12"></a>        <span class="k">return</span> <span class="n">path_segment</span><span class="p">,</span> <span class="n">obj_adapter</span>
<a name="listingsbig-rename-error-renderpy-13"></a>
<a name="listingsbig-rename-error-renderpy-14"></a>    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">obj_adapter</span><span class="o">.</span><span class="n">MODIFICATIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a name="listingsbig-rename-error-renderpy-15"></a>            <span class="s1">'fields'</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a name="listingsbig-rename-error-renderpy-16"></a>
<a name="listingsbig-rename-error-renderpy-17"></a>        <span class="c1"># Check if this field as actually a nested object</span>
<a name="listingsbig-rename-error-renderpy-18"></a>        <span class="k">if</span> <span class="nb">object</span><span class="o">.</span><span class="n">FIELDS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path_segment</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'relation'</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
<a name="listingsbig-rename-error-renderpy-19"></a>
<a name="listingsbig-rename-error-renderpy-20"></a>            <span class="n">obj_cls</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">FIELDS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">path_segment</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'relation_cls'</span><span class="p">)</span>
<a name="listingsbig-rename-error-renderpy-21"></a>            <span class="n">obj_adapter</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_object_adapter</span><span class="p">(</span>
<a name="listingsbig-rename-error-renderpy-22"></a>                <span class="bp">cls</span><span class="o">.</span><span class="n">ADAPTER_FORMAT</span><span class="p">,</span>
<a name="listingsbig-rename-error-renderpy-23"></a>                <span class="n">obj_cls</span><span class="p">)</span>
<a name="listingsbig-rename-error-renderpy-24"></a>
<a name="listingsbig-rename-error-renderpy-25"></a>            <span class="nb">object</span> <span class="o">=</span> <span class="n">objects</span><span class="o">.</span><span class="n">DesignateObject</span><span class="o">.</span><span class="n">obj_cls_from_name</span><span class="p">(</span><span class="n">obj_cls</span><span class="p">)()</span>
<a name="listingsbig-rename-error-renderpy-26"></a>            <span class="c1"># Recurse down into this object</span>
<a name="listingsbig-rename-error-renderpy-27"></a>            <span class="n">path_segment</span><span class="p">,</span> <span class="n">obj_adapter</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_rename_path_segment</span><span class="p">(</span>
<a name="listingsbig-rename-error-renderpy-28"></a>                <span class="n">obj_adapter</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">path_segment</span><span class="p">)</span>
<a name="listingsbig-rename-error-renderpy-29"></a>
<a name="listingsbig-rename-error-renderpy-30"></a>            <span class="c1"># No need to continue the loop</span>
<a name="listingsbig-rename-error-renderpy-31"></a>            <span class="k">break</span>
<a name="listingsbig-rename-error-renderpy-32"></a>
<a name="listingsbig-rename-error-renderpy-33"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
<a name="listingsbig-rename-error-renderpy-34"></a>            <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
<a name="listingsbig-rename-error-renderpy-35"></a>                <span class="s1">'rename'</span><span class="p">,</span> <span class="n">NotSpecifiedSential</span><span class="p">()),</span> <span class="n">NotSpecifiedSential</span><span class="p">)</span>\
<a name="listingsbig-rename-error-renderpy-36"></a>                <span class="ow">and</span> <span class="n">path_segment</span> <span class="o">==</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'rename'</span><span class="p">):</span>
<a name="listingsbig-rename-error-renderpy-37"></a>            <span class="c1"># Just do the rename</span>
<a name="listingsbig-rename-error-renderpy-38"></a>            <span class="n">path_segment</span> <span class="o">=</span> <span class="n">key</span>
<a name="listingsbig-rename-error-renderpy-39"></a>
<a name="listingsbig-rename-error-renderpy-40"></a>    <span class="k">return</span> <span class="n">path_segment</span><span class="p">,</span> <span class="n">obj_adapter</span>
</pre></td>
</tr></table>
<footer id="footer"><p>Contents © 2018         <a href="mailto:graham@hayes.ie">Graham Hayes</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="../assets/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="../assets/js/jquery.timeago.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-23042579-7', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
